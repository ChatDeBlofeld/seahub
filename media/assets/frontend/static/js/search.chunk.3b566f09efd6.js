(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[17],{1743:function(e,t,s){s(75),e.exports=s(1753)},1753:function(e,t,s){"use strict";s.r(t);var a,n=s(3),i=s(5),r=s(7),l=s(6),c=s(2),o=s.n(c),h=s(31),p=s.n(h),d=s(69),u=s(117),b=s(261),j=s.n(b),m=s(1),f=s(8),O=s(12),g=s.n(O),x=s(4),y=s(0),v=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).handlerFileURL=function(e){return e.is_dir?m.uc+"library/"+e.repo_id+"/"+e.repo_name+e.fullpath:m.uc+"lib/"+e.repo_id+"/file"+x.a.encodePath(e.fullpath)},a.handlerParentDirPath=function(e){var t=e.is_dir?e.fullpath.length-e.name.length-1:e.fullpath.length-e.name.length;return e.fullpath.substring(0,t)},a.handlerParentDirURL=function(e){return m.uc+"library/"+e.repo_id+"/"+e.repo_name+a.handlerParentDirPath(e)},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props.item,t=decodeURI(e.fullpath).substring(1),s=t?x.a.getFolderIconUrl(!1,192):x.a.getDefaultLibIconUrl(!0),a=e.is_dir?s:x.a.getFileIconUrl(e.name,192);return""!==e.thumbnail_url&&(a=e.thumbnail_url),Object(y.jsxs)("li",{className:"search-result-item",children:[Object(y.jsx)("img",{className:t?"item-img":"lib-item-img",src:a,alt:""}),Object(y.jsxs)("div",{className:"item-content",children:[Object(y.jsx)("div",{className:"item-name ellipsis",children:Object(y.jsx)("a",{href:this.handlerFileURL(e),target:"_blank",title:e.name,rel:"noreferrer",children:e.name})}),Object(y.jsx)("div",{className:"item-link ellipsis",children:Object(y.jsxs)("a",{href:this.handlerParentDirURL(e),target:"_blank",rel:"noreferrer",children:[e.repo_name,this.handlerParentDirPath(e)]})}),Object(y.jsx)("div",{className:"item-link ellipsis",children:x.a.bytesToSize(e.size)+" "+g()(1e3*e.last_modified).format("YYYY-MM-DD")}),Object(y.jsx)("div",{className:"item-text ellipsis",dangerouslySetInnerHTML:{__html:e.content_highlight}})]})]})}}]),s}(o.a.Component),S=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(i.a)(s,[{key:"render",value:function(){var e=this.props,t=e.resultItems,s=e.total;return Object(y.jsxs)("div",{className:"search-result-container position-static",children:[Object(y.jsx)("p",{className:"tip",children:s>0?s+" "+(1===s?Object(m.sb)("result"):Object(m.sb)("results")):Object(m.sb)("No result")}),Object(y.jsx)("ul",{className:"search-result-list",children:t.map((function(e,t){return Object(y.jsx)(v,{item:e},t)}))})]})}}]),s}(o.a.Component),T=s(87),_=s.n(T),C=s(27),N=s(44),k=s(43),F=s(68),I=s(46),M=s(9),D=s.n(M),w=s(33),E=s.n(w),z=s(227),R=s(22);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){Object(I.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var A=L(L({},z.Transition.propTypes),{},{isOpen:D.a.bool,children:D.a.oneOfType([D.a.arrayOf(D.a.node),D.a.node]),tag:R.q,className:D.a.node,navbar:D.a.bool,cssModule:D.a.object,innerRef:D.a.oneOfType([D.a.func,D.a.string,D.a.object])}),q=L(L({},z.Transition.defaultProps),{},{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:R.e.Collapse}),H=((a={})[R.d.ENTERING]="collapsing",a[R.d.ENTERED]="collapse show",a[R.d.EXITING]="collapsing",a[R.d.EXITED]="collapse",a);function Y(e){return e.scrollHeight}var K=function(e){function t(t){var s;return(s=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){s[e]=s[e].bind(Object(k.a)(s))})),s}Object(F.a)(t,e);var s=t.prototype;return s.onEntering=function(e,t){this.setState({height:Y(e)}),this.props.onEntering(e,t)},s.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},s.onExit=function(e){this.setState({height:Y(e)}),this.props.onExit(e)},s.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},s.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},s.render=function(){var e=this,t=this.props,s=t.tag,a=t.isOpen,n=t.className,i=t.navbar,r=t.cssModule,l=t.children,c=(t.innerRef,Object(N.a)(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),h=this.state.height,p=Object(R.o)(c,R.c),d=Object(R.n)(c,R.c);return o.a.createElement(z.Transition,Object(C.a)({},p,{in:a,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var a=function(e){return H[e]||"collapse"}(t),c=Object(R.m)(E()(n,a,i&&"navbar-collapse"),r),p=null===h?null:{height:h};return o.a.createElement(s,Object(C.a)({},d,{style:L(L({},d.style),p),className:c,ref:e.props.innerRef}),l)}))},t}(c.Component);K.propTypes=A,K.defaultProps=q;var U=K,V=s(1776),B=s(1777),G=s(999),J=s(997),W=s(441),X={className:D.a.string,id:D.a.oneOfType([D.a.string,D.a.number]).isRequired,label:D.a.node,valid:D.a.bool,invalid:D.a.bool,bsSize:D.a.string,htmlFor:D.a.string,cssModule:D.a.object,onChange:D.a.func,children:D.a.oneOfType([D.a.node,D.a.array,D.a.func]),innerRef:D.a.oneOfType([D.a.object,D.a.string,D.a.func])},Q=function(e){function t(t){var s;return(s=e.call(this,t)||this).state={files:null},s.onChange=s.onChange.bind(Object(k.a)(s)),s}Object(F.a)(t,e);var s=t.prototype;return s.onChange=function(e){var t=e.target,s=this.props.onChange,a=this.getSelectedFiles(t);"function"===typeof s&&s.apply(void 0,arguments),this.setState({files:a})},s.getSelectedFiles=function(e){if(this.props.multiple&&e.files)return[].slice.call(e.files).map((function(e){return e.name})).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value},s.render=function(){var e=this.props,t=e.className,s=e.label,a=e.valid,n=e.invalid,i=e.cssModule,r=e.children,l=(e.bsSize,e.innerRef),c=e.htmlFor,h=(e.type,e.onChange,e.dataBrowse),p=e.hidden,d=Object(N.a)(e,["className","label","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor","type","onChange","dataBrowse","hidden"]),u=Object(R.m)(E()(t,"custom-file"),i),b=Object(R.m)(E()(n&&"is-invalid",a&&"is-valid"),i),j=c||d.id,m=this.state.files;return o.a.createElement("div",{className:u,hidden:p||!1},o.a.createElement("input",Object(C.a)({type:"file"},d,{ref:l,"aria-invalid":n,className:E()(b,Object(R.m)("custom-file-input",i)),onChange:this.onChange})),o.a.createElement("label",{className:Object(R.m)("custom-file-label",i),htmlFor:j,"data-browse":h},m||s||"Choose file"),r)},t}(o.a.Component);Q.propTypes=X;var Z=Q,$={className:D.a.string,id:D.a.oneOfType([D.a.string,D.a.number]).isRequired,type:D.a.string.isRequired,label:D.a.node,inline:D.a.bool,valid:D.a.bool,invalid:D.a.bool,bsSize:D.a.string,htmlFor:D.a.string,cssModule:D.a.object,children:D.a.oneOfType([D.a.node,D.a.array,D.a.func]),innerRef:D.a.oneOfType([D.a.object,D.a.string,D.a.func])};function ee(e){var t=e.className,s=e.label,a=e.inline,n=e.valid,i=e.invalid,r=e.cssModule,l=e.children,c=e.bsSize,h=e.innerRef,p=e.htmlFor,d=Object(N.a)(e,["className","label","inline","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor"]),u=d.type,b=Object(R.m)(E()(t,"custom-"+u,!!c&&"custom-"+u+"-"+c),r),j=Object(R.m)(E()(i&&"is-invalid",n&&"is-valid"),r),m=p||d.id;if("select"===u){d.type;var f=Object(N.a)(d,["type"]);return o.a.createElement("select",Object(C.a)({},f,{ref:h,className:E()(j,b),"aria-invalid":i}),l)}if("file"===u)return o.a.createElement(Z,e);if("checkbox"!==u&&"radio"!==u&&"switch"!==u)return o.a.createElement("input",Object(C.a)({},d,{ref:h,"aria-invalid":i,className:E()(j,b)}));var O=E()(b,Object(R.m)(E()("custom-control",{"custom-control-inline":a}),r)),g=d.hidden,x=Object(N.a)(d,["hidden"]);return o.a.createElement("div",{className:O,hidden:g||!1},o.a.createElement("input",Object(C.a)({},x,{type:"switch"===u?"checkbox":u,ref:h,"aria-invalid":i,className:E()(j,Object(R.m)("custom-control-input",r))})),o.a.createElement("label",{className:Object(R.m)("custom-control-label",r),htmlFor:m},s),l)}ee.propTypes=$;var te=ee,se=s(1768),ae=s(1769),ne=s(80),ie=s(384),re=window.search.pageOptions,le=re.repo_name,ce=re.search_repo,oe=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).getFileTypesList=function(e){for(var t=[Object(m.sb)("Text"),Object(m.sb)("Document"),Object(m.sb)("Image"),Object(m.sb)("Video"),Object(m.sb)("Audio"),"PDF","Markdown"],s=[],a=0,n=e.length;a<n;a++)e[a]&&s.push(t[a]);return s},a.disabledStartDate=function(e){if(!e)return!1;var t=e.isAfter(g()(),"day"),s=a.props.stateAndValues.time_to;return s&&e.isAfter(s)||t},a.disabledEndDate=function(e){if(!e)return!1;var t=e.isAfter(g()(),"day"),s=a.props.stateAndValues.time_from;return s&&e.isBefore(s)||t},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this,t=this.props.stateAndValues,s=t.errorDateMsg,a=t.errorSizeMsg;if(t.isShowSearchFilter){var n=t.size_from,i=t.size_to,r=t.time_from,l=t.time_to,o=t.search_repo,h=t.fileTypeItemsStatus,p=this.getFileTypesList(h),d=p.length;return Object(y.jsxs)("div",{className:"search-filters",children:[o&&Object(y.jsxs)("span",{className:"mr-4",children:[Object(m.sb)("Libraries"),": ","all"==o?Object(m.sb)("All"):le]}),d>0&&Object(y.jsxs)("span",{className:"mr-4",children:[Object(m.sb)("File Types"),": ",p.map((function(e,t){return Object(y.jsxs)("span",{children:[e,t!==d-1&&","," "]},t)}))]}),r&&l&&Object(y.jsxs)("span",{className:"mr-4",children:[Object(m.sb)("Last Update"),": ",r.format("YYYY-MM-DD")," ",Object(m.sb)("to")," ",l.format("YYYY-MM-DD")]}),n&&i&&Object(y.jsxs)("span",{className:"mr-4",children:[Object(m.sb)("Size"),": ",n,"MB - ",i,"MB"]})]})}return Object(y.jsx)("div",{className:"advanced-search",children:Object(y.jsxs)(U,{isOpen:t.isCollapseOpen,children:["all"!==ce&&Object(y.jsx)("div",{className:"search-repo search-catalog",children:Object(y.jsxs)(V.a,{children:[Object(y.jsxs)(B.a,{md:"2",lg:"2",children:[Object(m.sb)("Libraries"),": "]}),Object(y.jsx)(B.a,{md:"4",lg:"4",children:Object(y.jsx)(G.a,{check:!0,children:Object(y.jsxs)(J.a,{check:!0,children:[Object(y.jsx)(W.a,{type:"radio",name:"repo",checked:t.isAllRepoCheck,onChange:function(){return e.props.handlerRepo(!0)}}),Object(m.sb)("In all libraries")]})})}),Object(y.jsx)(B.a,{md:"4",lg:"4",children:Object(y.jsx)(G.a,{check:!0,children:Object(y.jsxs)(J.a,{check:!0,children:[Object(y.jsx)(W.a,{type:"radio",name:"repo",checked:!t.isAllRepoCheck,onChange:function(){return e.props.handlerRepo(!1)}}),le]})})})]})}),Object(y.jsxs)("div",{className:"search-file-types search-catalog",children:[Object(y.jsxs)(V.a,{children:[Object(y.jsxs)(B.a,{md:"2",lg:"2",children:[Object(m.sb)("File Types"),": "]}),Object(y.jsx)(B.a,{md:"4",lg:"4",children:Object(y.jsx)(G.a,{check:!0,children:Object(y.jsxs)(J.a,{check:!0,children:[Object(y.jsx)(W.a,{type:"radio",name:"types",checked:!t.isFileTypeCollapseOpen,onChange:this.props.closeFileTypeCollapse}),Object(m.sb)("All file types")]})})}),Object(y.jsx)(B.a,{md:"4",lg:"4",children:Object(y.jsx)(G.a,{check:!0,children:Object(y.jsxs)(J.a,{check:!0,children:[Object(y.jsx)(W.a,{type:"radio",name:"types",checked:t.isFileTypeCollapseOpen,onChange:this.props.openFileTypeCollapse}),Object(m.sb)("Custom file types")]})})})]}),Object(y.jsxs)(V.a,{children:[Object(y.jsx)(B.a,{md:"2",lg:"2"}),Object(y.jsx)(B.a,{md:"10",lg:"10",children:Object(y.jsxs)(U,{isOpen:t.isFileTypeCollapseOpen,children:[Object(y.jsx)(G.a,{className:"search-file-types-form",children:Object(y.jsxs)(c.Fragment,{children:[Object(y.jsx)(te,{type:"checkbox",id:"checkTextFiles",label:Object(m.sb)("Text files"),inline:!0,onChange:function(){return e.props.handlerFileTypes(0)},checked:t.fileTypeItemsStatus[0]}),Object(y.jsx)(te,{type:"checkbox",id:"checkDocuments",label:Object(m.sb)("Documents"),inline:!0,onChange:function(){return e.props.handlerFileTypes(1)},checked:t.fileTypeItemsStatus[1]}),Object(y.jsx)(te,{type:"checkbox",id:"checkImages",label:Object(m.sb)("Images"),inline:!0,onChange:function(){return e.props.handlerFileTypes(2)},checked:t.fileTypeItemsStatus[2]}),Object(y.jsx)(te,{type:"checkbox",id:"checkVideo",label:Object(m.sb)("Video"),inline:!0,onChange:function(){return e.props.handlerFileTypes(3)},checked:t.fileTypeItemsStatus[3]}),Object(y.jsx)(te,{type:"checkbox",id:"checkAudio",label:Object(m.sb)("Audio"),inline:!0,onChange:function(){return e.props.handlerFileTypes(4)},checked:t.fileTypeItemsStatus[4]}),Object(y.jsx)(te,{type:"checkbox",id:"checkPdf",label:"PDF",inline:!0,onChange:function(){return e.props.handlerFileTypes(5)},checked:t.fileTypeItemsStatus[5]}),Object(y.jsx)(te,{type:"checkbox",id:"checkMarkdown",label:"Markdown",inline:!0,onChange:function(){return e.props.handlerFileTypes(6)},checked:t.fileTypeItemsStatus[6]})]})}),Object(y.jsx)("input",{type:"text",className:"form-control search-input",name:"query",autoComplete:"off",placeholder:Object(m.sb)("Input file extensions here, separate with ','"),onChange:this.props.handlerFileTypesInput,value:t.input_fexts,onKeyDown:this.props.handleKeyDown})]})})]})]}),Object(y.jsxs)("div",{className:"search-date search-catalog",children:[Object(y.jsxs)(V.a,{children:[Object(y.jsxs)(B.a,{md:"2",lg:"2",className:"mt-2",children:[Object(m.sb)("Last Update"),": "]}),Object(y.jsxs)(B.a,{md:"4",lg:"4",sm:"4",xs:"5",className:"position-relative",children:[Object(y.jsx)(ie.a,{inputWidth:"100%",disabledDate:this.disabledStartDate,value:t.time_from,onChange:this.props.handleTimeFromInput,showHourAndMinute:!1}),Object(y.jsx)("span",{className:"select-data-icon",children:Object(y.jsx)("i",{className:"fa fa-calendar-alt"})})]}),Object(y.jsx)("div",{className:"mt-2",children:"-"}),Object(y.jsxs)(B.a,{md:"4",lg:"4",sm:"4",xs:"5",className:"position-relative",children:[Object(y.jsx)(ie.a,{inputWidth:"100%",disabledDate:this.disabledEndDate,value:t.time_to,onChange:this.props.handleTimeToInput,showHourAndMinute:!1}),Object(y.jsx)("span",{className:"select-data-icon",children:Object(y.jsx)("i",{className:"fa fa-calendar-alt"})})]})]}),s&&Object(y.jsxs)(V.a,{children:[Object(y.jsx)(B.a,{md:"2",lg:"2"}),Object(y.jsx)(B.a,{md:"8",className:"error mt-2",children:s})]})]}),Object(y.jsx)("div",{className:"search-size search-catalog",children:Object(y.jsxs)(V.a,{children:[Object(y.jsxs)(B.a,{md:"2",lg:"2",className:"mt-2",children:[Object(m.sb)("Size"),": "]}),Object(y.jsxs)(B.a,{md:"4",lg:"4",sm:"4",xs:"5",children:[Object(y.jsx)(G.a,{children:Object(y.jsxs)(se.a,{children:[Object(y.jsx)(W.a,{type:"tel",name:"size_from",onKeyDown:this.props.handleKeyDown,onChange:this.props.handleSizeFromInput,value:t.size_from}),Object(y.jsx)(ae.a,{addonType:"append",children:"MB"})]})}),Object(y.jsxs)(_.a,{query:"(min-width: 768px)",children:[a&&Object(y.jsx)("div",{className:"error mb-4",children:a}),Object(y.jsx)(ne.a,{color:"primary",onClick:this.props.handleSubmit,children:Object(m.sb)("Submit")}),Object(y.jsx)(ne.a,{className:"ml-2",onClick:this.props.handleReset,children:Object(m.sb)("Reset")})]})]}),Object(y.jsx)("div",{className:"mt-2",children:"-"}),Object(y.jsx)(B.a,{md:"4",lg:"4",sm:"4",xs:"5",children:Object(y.jsx)(G.a,{children:Object(y.jsxs)(se.a,{children:[Object(y.jsx)(W.a,{type:"tel",name:"size_to",onKeyDown:this.props.handleKeyDown,onChange:this.props.handleSizeToInput,value:t.size_to}),Object(y.jsx)(ae.a,{addonType:"append",children:"MB"})]})})})]})}),Object(y.jsxs)(_.a,{query:"(max-width: 767.8px)",children:[a&&Object(y.jsx)("div",{className:"error mb-4",children:a}),Object(y.jsx)(ne.a,{color:"primary",onClick:this.props.handleSubmit,children:Object(m.sb)("Submit")}),Object(y.jsx)(ne.a,{className:"ml-2",onClick:this.props.handleReset,children:Object(m.sb)("Reset")})]})]})})}}]),s}(o.a.Component),he=s(10),pe=s(19),de=(s(170),window.search.pageOptions),ue=de.q,be=de.search_repo,je=de.search_ftypes,me=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).handleSearchParams=function(e){var t={q:a.state.q.trim(),page:e},s=a.getFileTypesList();a.state.search_repo&&(t.search_repo=a.state.search_repo),a.state.search_ftypes&&(t.search_ftypes=a.state.search_ftypes),a.state.per_page&&(t.per_page=a.state.per_page),a.state.input_fexts&&(t.input_fexts=a.state.input_fexts);var n=a.state,i=n.time_from,r=n.time_to;return i&&(t.time_from=parseInt(i.valueOf()/1e3)),r&&(t.time_to=parseInt(r.valueOf()/1e3)),a.state.size_from&&(t.size_from=1e3*a.state.size_from*1e3),a.state.size_to&&(t.size_to=1e3*a.state.size_to*1e3),0!==s.length&&(t.ftype=s),t},a.handleSubmit=function(){if(a.compareNumber(a.state.size_from,a.state.size_to))a.setState({errorSizeMsg:Object(m.sb)("Invalid file size range.")});else{if(a.getValueLength(a.state.q.trim())<3)0===a.state.q.trim().length?a.setState({errorMsg:Object(m.sb)("It is required.")}):a.setState({errorMsg:Object(m.sb)("Required at least three letters.")}),a.state.isLoading&&a.setState({isLoading:!1});else{var e=a.handleSearchParams(1);a.getSearchResults(e)}a.state.isCollapseOpen&&a.setState({isCollapseOpen:!1})}},a.compareNumber=function(e,t){return!(!e||!t)&&parseInt(e.replace(/\-/g,""))>=parseInt(t.replace(/\-/g,""))},a.showSearchFilter=function(){a.setState({isShowSearchFilter:!0})},a.hideSearchFilter=function(){a.setState({isShowSearchFilter:!1})},a.handleReset=function(){a.setState({q:ue.trim(),search_repo:be,search_ftypes:je,fileTypeItemsStatus:[!1,!1,!1,!1,!1,!1,!1],input_fexts:"",time_from:null,time_to:null,size_from:"",size_to:"",errorMsg:"",errorDateMsg:"",errorSizeMsg:""})},a.handlePrevious=function(e){e.preventDefault(),a.stateHistory&&a.state.page>1?a.setState(a.stateHistory,(function(){var e=a.handleSearchParams(a.state.page-1);a.getSearchResults(e)})):he.a.danger(Object(m.sb)("Error"),{duration:3})},a.handleNext=function(e){e.preventDefault(),a.stateHistory&&a.state.hasMore?a.setState(a.stateHistory,(function(){var e=a.handleSearchParams(a.state.page+1);a.getSearchResults(e)})):he.a.danger(Object(m.sb)("Error"),{duration:3})},a.toggleCollapse=function(){a.setState({isCollapseOpen:!a.state.isCollapseOpen}),a.hideSearchFilter()},a.openFileTypeCollapse=function(){a.setState({isFileTypeCollapseOpen:!0,search_ftypes:"custom"})},a.closeFileTypeCollapse=function(){a.setState({isFileTypeCollapseOpen:!1,fileTypeItemsStatus:Array(7).fill(!1),search_ftypes:"all",input_fexts:""})},a.handleSearchInput=function(e){a.setState({q:e.target.value}),a.state.errorMsg&&a.setState({errorMsg:""}),a.state.errorSizeMsg&&a.setState({errorSizeMsg:""}),a.state.errorDateMsg&&a.setState({errorDateMsg:""})},a.handleKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),a.handleSubmit())},a.handlerRepo=function(e){e?a.setState({isAllRepoCheck:!0,search_repo:"all"}):a.setState({isAllRepoCheck:!1,search_repo:"all"!==be?be:""})},a.handlerFileTypes=function(e){var t=a.state.fileTypeItemsStatus;t[e]=!a.state.fileTypeItemsStatus[e],a.setState({fileTypeItemsStatus:t})},a.getFileTypesList=function(){for(var e=["Text","Document","Image","Video","Audio","PDF","Markdown"],t=[],s=0,n=a.state.fileTypeItemsStatus.length;s<n;s++)a.state.fileTypeItemsStatus[s]&&t.push(e[s]);return t},a.handlerFileTypesInput=function(e){a.setState({input_fexts:e.target.value.trim()})},a.handleTimeFromInput=function(e){a.setState({time_from:e?e.hours(0).minutes(0).seconds(0):e}),a.state.errorDateMsg&&a.setState({errorDateMsg:""})},a.handleTimeToInput=function(e){a.setState({time_to:e?e.hours(23).minutes(59).seconds(59):e}),a.state.errorDateMsg&&a.setState({errorDateMsg:""})},a.handleSizeFromInput=function(e){a.setState({size_from:e.target.value>=0?e.target.value:0}),a.state.errorSizeMsg&&a.setState({errorSizeMsg:""})},a.handleSizeToInput=function(e){a.setState({size_to:e.target.value>=0?e.target.value:0}),a.state.errorSizeMsg&&a.setState({errorSizeMsg:""})},a.stateHistory=null,a.state={isCollapseOpen:"all"!==be,isFileTypeCollapseOpen:!1,isResultGot:!1,isLoading:!0,isAllRepoCheck:"all"===be,isShowSearchFilter:!1,q:ue.trim(),search_repo:be,search_ftypes:je,fileTypeItemsStatus:[!1,!1,!1,!1,!1,!1,!1],input_fexts:"",time_from:null,time_to:null,size_from:"",size_to:"",hasMore:!1,resultItems:[],page:1,per_page:20,errorMsg:"",errorDateMsg:"",errorSizeMsg:""},a}return Object(i.a)(s,[{key:"getSearchResults",value:function(e){var t=this;this.setState({isLoading:!0,isResultGot:!1});var s=j()(this.state);f.a.searchFiles(e,null).then((function(a){var n=a.data,i=n.results,r=n.has_more,l=n.total;t.setState({isLoading:!1,isResultGot:!0,resultItems:i,hasMore:r,total:l,page:e.page,isShowSearchFilter:!0}),t.stateHistory=s,t.stateHistory.resultItems=i,t.stateHistory.hasMore=r,t.stateHistory.page=e.page})).catch((function(e){t.setState({isLoading:!1}),e.response?he.a.danger(e.response.data.detail||e.response.data.error_msg||Object(m.sb)("Error"),{duration:3}):he.a.danger(Object(m.sb)("Please check the network."),{duration:3})}))}},{key:"getValueLength",value:function(e){for(var t,s=0,a=0,n=e.length;a<n;a++)10===(t=e.charCodeAt(a))?s+=2:t<127?s+=1:t>=128&&t<=2047?s+=2:t>=2048&&t<=65535&&(s+=3);return s}},{key:"componentDidMount",value:function(){this.state.q?this.handleSubmit():this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.state.isCollapseOpen;return Object(y.jsxs)("div",{className:"search-page",children:[Object(y.jsxs)("div",{className:"search-page-container",children:[Object(y.jsxs)("div",{className:"input-icon align-items-center d-flex",children:[Object(y.jsx)("input",{type:"text",className:"form-control search-input",name:"query",autoComplete:"off",value:this.state.q,placeholder:Object(m.sb)("Search Files"),onChange:this.handleSearchInput,onKeyDown:this.handleKeyDown}),Object(y.jsx)("i",{className:"search-icon-right input-icon-addon fas fa-search",onClick:this.handleSubmit}),Object(y.jsx)("i",{className:"fas action-icon fa-angle-double-".concat(e?"up":"down"),onClick:this.toggleCollapse})]}),this.state.errorMsg&&Object(y.jsx)("div",{className:"error",children:this.state.errorMsg}),Object(y.jsx)(oe,{openFileTypeCollapse:this.openFileTypeCollapse,closeFileTypeCollapse:this.closeFileTypeCollapse,handlerFileTypes:this.handlerFileTypes,handlerFileTypesInput:this.handlerFileTypesInput,handleSubmit:this.handleSubmit,handleReset:this.handleReset,handlerRepo:this.handlerRepo,handleKeyDown:this.handleKeyDown,handleTimeFromInput:this.handleTimeFromInput,handleTimeToInput:this.handleTimeToInput,handleSizeFromInput:this.handleSizeFromInput,handleSizeToInput:this.handleSizeToInput,stateAndValues:this.state})]}),this.state.isLoading&&Object(y.jsx)(pe.a,{}),!this.state.isLoading&&this.state.isResultGot&&Object(y.jsx)(S,{resultItems:this.state.resultItems,total:this.state.total}),!this.state.isLoading&&this.state.isResultGot&&Object(y.jsxs)("div",{className:"paginator",children:[1!==this.state.page&&Object(y.jsx)("a",{href:"#",onClick:this.handlePrevious,children:Object(m.sb)("Previous")}),1!==this.state.page&&this.state.hasMore&&Object(y.jsx)("span",{children:" | "}),this.state.hasMore&&Object(y.jsx)("a",{href:"#",onClick:this.handleNext,children:Object(m.sb)("Next")})]})]})}}]),s}(o.a.Component),fe=(s(216),s(152),function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).onSearchedClick=function(e){var t=e.is_dir?m.uc+"library/"+e.repo_id+"/"+e.repo_name+e.path:m.uc+"lib/"+e.repo_id+"/file"+x.a.encodePath(e.path);window.open("about:blank").location.href=t},a}return Object(i.a)(s,[{key:"render",value:function(){return Object(y.jsxs)("div",{className:"w-100 h-100",children:[Object(y.jsxs)("div",{className:"main-panel-north border-left-show",children:[Object(y.jsx)(u.a,{}),Object(y.jsx)(d.a,{onSearchedClick:this.onSearchedClick})]}),Object(y.jsx)("div",{className:"main-panel-south",children:Object(y.jsx)(me,{})})]})}}]),s}(o.a.Component));p.a.render(Object(y.jsx)(fe,{}),document.getElementById("wrapper"))},261:function(e,t,s){e.exports=function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var s=t instanceof Array?[]:{};return a(t,s),s;function a(t,s){for(var n in t){var i=t[n];i instanceof Date?e(s,n,new Date(i.getTime())):i instanceof Function?e(s,n,i):i instanceof Array?a(i,e(s,n,[])):i instanceof Object?a(i,e(s,n,{})):e(s,n,i)}}};function e(e,t,s){return e instanceof Array?(e.push(s),e[e.length-1]):e instanceof Object?(e[t]=s,e[t]):void 0}}()}},[[1743,1,0]]]);
//# sourceMappingURL=search.chunk.js.map