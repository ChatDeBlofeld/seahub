webpackJsonp([20],{10:function(e,t,n){"use strict";function a(){return o.default.createElement("span",{className:"loading-icon loading-tip"})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a},103:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(5),d=n(1),p=a(d),f=n(9),Y=a(f),Z=n(156),m=a(Z),L=n(2),S=n(3);n(104);var C={path:p.default.string.isRequired,repoID:p.default.string.isRequired},X=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1,smartLink:""},n.toggle=n.toggle.bind(n),n.getInternalLink=n.getInternalLink.bind(n),n.copyToClipBoard=n.copyToClipBoard.bind(n),n}return i(t,e),s(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"getInternalLink",value:function(){var e=this,t=this.props.repoID,n=this.props.path;S.seafileAPI.getInternalLink(t,n).then(function(t){e.setState({isOpen:!0,smartLink:t.data.smart_link})})}},{key:"copyToClipBoard",value:function(){(0,m.default)(this.state.smartLink),this.setState({isOpen:!1});var e=(0,L.gettext)("Internal link has been copied to clipboard");Y.default.success(e)}},{key:"render",value:function(){return c.default.createElement("span",{className:"file-internal-link",title:(0,L.gettext)("Internal Link")},c.default.createElement("i",{className:"fa fa-link",onClick:this.getInternalLink}),c.default.createElement(u.Modal,{isOpen:this.state.isOpen,toggle:this.toggle},c.default.createElement(u.ModalHeader,{toggle:this.toggle},(0,L.gettext)("Internal Link")),c.default.createElement(u.ModalBody,null,c.default.createElement("p",{className:"tip mb-1"},(0,L.gettext)("An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.")),c.default.createElement("p",null,c.default.createElement("a",{target:"_blank",href:this.state.smartLink},this.state.smartLink))),c.default.createElement(u.ModalFooter,null,c.default.createElement(u.Button,{color:"secondary",onClick:this.toggle},(0,L.gettext)("Cancel")),c.default.createElement(u.Button,{color:"primary",onClick:this.copyToClipBoard},(0,L.gettext)("Copy")))))}}]),t}(c.default.Component);X.propTypes=C,t.default=X},104:function(e,t){},105:function(e,t){},113:function(e,t){},12:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(6),d=a(u),p=n(1),f=a(p),Y={children:f.default.object.isRequired},Z=document.getElementById("modal-wrapper"),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.el=document.createElement("div"),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){Z.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){Z.removeChild(this.el)}},{key:"render",value:function(){return d.default.createPortal(this.props.children,this.el)}}]),t}(c.default.Component);m.propTypes=Y,t.default=m},13:function(e,t,n){"use strict";n(42),n(43),"undefined"===typeof Promise&&(n(44).enable(),window.Promise=n(37)),n(40),Object.assign=n(26)},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.strChineseFirstPY="YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY"},141:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(112),f=a(p),Y=n(3),Z=n(2),m=n(142),L=a(m),S=n(143),C=a(S),X=n(145),h=a(X);n(113);var J={onSave:d.default.func,content:d.default.object.isRequired,isSaving:d.default.bool,needSave:d.default.bool},g=window.app.pageOptions,T=g.isStarred,P=g.isLocked,D=g.lockedByMe,Q=g.repoID,H=g.filePath,w=g.enableWatermark,M=g.userNickName,B=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleCommentPanel=function(){n.setState({isCommentPanelOpen:!n.state.isCommentPanelOpen})},n.toggleStar=function(){n.state.isStarred?Y.seafileAPI.unstarItem(Q,H).then(function(e){n.setState({isStarred:!1})}):Y.seafileAPI.starItem(Q,H).then(function(e){n.setState({isStarred:!0})})},n.toggleLockFile=function(){n.state.isLocked?Y.seafileAPI.unlockfile(Q,H).then(function(e){n.setState({isLocked:!1,lockedByMe:!1})}):Y.seafileAPI.lockfile(Q,H).then(function(e){n.setState({isLocked:!0,lockedByMe:!0})})},n.state={isStarred:T,isLocked:P,lockedByMe:D,isCommentPanelOpen:!1},n}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"h-100 d-flex flex-column"},c.default.createElement("div",{className:"file-view-header d-flex justify-content-between align-items-center"},c.default.createElement(L.default,{isStarred:this.state.isStarred,isLocked:this.state.isLocked,toggleStar:this.toggleStar}),c.default.createElement(C.default,{isLocked:this.state.isLocked,lockedByMe:this.state.lockedByMe,onSave:this.props.onSave,isSaving:this.props.isSaving,needSave:this.props.needSave,toggleLockFile:this.toggleLockFile,toggleCommentPanel:this.toggleCommentPanel})),c.default.createElement("div",{className:"file-view-body flex-auto d-flex o-hidden"},this.props.content,this.state.isCommentPanelOpen&&c.default.createElement(h.default,{toggleCommentPanel:this.toggleCommentPanel})))}}]),t}(c.default.Component);w&&f.default.init({watermark_txt:Z.siteName+" "+M,watermark_alpha:.075}),B.propTypes=J,t.default=B},142:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(8),f=a(p),Y=n(2),Z=n(103),m=a(Z),L={toggleStar:d.default.func.isRequired,isLocked:d.default.bool.isRequired,isStarred:d.default.bool.isRequired},S=window.app.pageOptions,C=S.fileName,X=S.repoID,h=S.filePath,J=S.latestContributor,g=S.latestContributorName,T=S.lastModificationTime,P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleStar=function(e){e.preventDefault(),n.props.toggleStar()},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isStarred,n=e.isLocked,a=t?(0,Y.gettext)("starred"):(0,Y.gettext)("unstarred"),r=(0,Y.gettext)("locked");return c.default.createElement("div",null,c.default.createElement("h2",{className:"file-title d-flex align-items-center"},c.default.createElement("span",{className:"file-name"},C),c.default.createElement("a",{className:"file-star "+(t?"fa":"far")+" fa-star",href:"#",title:a,"aria-label":a,onClick:this.toggleStar}),c.default.createElement(m.default,{repoID:X,path:h}),Y.isPro&&n&&c.default.createElement("img",{className:"file-locked-icon",width:"16",src:Y.mediaUrl+"img/file-locked-32.png",alt:r,title:r,"aria-label":r})),c.default.createElement("div",{className:"meta-info"},c.default.createElement("a",{href:Y.siteRoot+"profile/"+encodeURIComponent(J)+"/"},g),c.default.createElement("span",{className:"ml-2"},(0,f.default)(1e3*T).format("YYYY-MM-DD HH:mm"))))}}]),t}(c.default.PureComponent);P.propTypes=L,t.default=P},143:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(5),f=n(144),Y=a(f),Z=n(2),m=n(4),L=n(12),S=a(L),C=n(50),X=a(C),h={isLocked:d.default.bool.isRequired,lockedByMe:d.default.bool.isRequired,onSave:d.default.func,isSaving:d.default.bool,needSave:d.default.bool,toggleLockFile:d.default.func.isRequired,toggleCommentPanel:d.default.func.isRequired},J=window.app.pageOptions,g=J.canLockUnlockFile,T=J.canGenerateShareLink,P=J.repoID,D=J.repoName,Q=J.repoEncrypted,H=J.parentDir,w=J.filePerm,M=J.filePath,B=J.fileName,b=J.canEditFile,G=J.err,y=(J.fileEnc,J.canDownloadFile),E=J.enableComment,v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleShareDialog=function(){n.setState({isShareDialogOpen:!n.state.isShareDialogOpen})},n.toggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.state={dropdownOpen:!1,isShareDialogOpen:!1},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isLocked,n=e.lockedByMe,a=!1,r=void 0,o=void 0;g&&(t?n&&(a=!0,r=(0,Z.gettext)("Unlock"),o="fa fa-unlock"):(a=!0,r=(0,Z.gettext)("Lock"),o="fa fa-lock"));var i=!1;return Q||"rw"!=w&&"r"!=w||!T||(i=!0),c.default.createElement(l.Fragment,null,c.default.createElement(p.ButtonGroup,{className:"d-none d-md-block"},c.default.createElement(Y.default,{id:"open-parent-folder",icon:"fa fa-folder-open",text:(0,Z.gettext)("Open parent folder"),tag:"a",href:Z.siteRoot+"library/"+P+"/"+m.Utils.encodePath(D+H)}),a&&c.default.createElement(Y.default,{id:"lock-unlock-file",icon:o,text:r,onClick:this.props.toggleLockFile}),i&&c.default.createElement(Y.default,{id:"share-file",icon:"fa fa-share-alt",text:(0,Z.gettext)("Share"),onClick:this.toggleShareDialog}),"rw"==w&&c.default.createElement(Y.default,{id:"history",icon:"fa fa-history",text:(0,Z.gettext)("History"),tag:"a",href:Z.siteRoot+"repo/file_revisions/"+P+"/?p="+encodeURIComponent(M)}),b&&!G&&(this.props.isSaving?c.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active"},c.default.createElement("i",{className:"fa fa-spin fa-spinner"})):this.props.needSave?c.default.createElement(Y.default,{text:(0,Z.gettext)("Save"),id:"saveButton",icon:"fa fa-save",onClick:this.props.onSave}):c.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active",disabled:!0},c.default.createElement("i",{className:"fa fa-save"}))),y&&c.default.createElement(Y.default,{id:"download-file",icon:"fa fa-download",text:(0,Z.gettext)("Download"),tag:"a",href:"?dl=1"}),E&&c.default.createElement(Y.default,{id:"comment",icon:"fa fa-comments",text:(0,Z.gettext)("Comment"),onClick:this.props.toggleCommentPanel})),c.default.createElement(p.Dropdown,{isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"d-block d-md-none"},c.default.createElement(p.ButtonGroup,null,b&&!G&&(this.props.isSaving?c.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active"},c.default.createElement("i",{className:"fa fa-spin fa-spinner"})):this.props.needSave?c.default.createElement(Y.default,{text:(0,Z.gettext)("Save"),id:"saveButton",icon:"fa fa-save",onClick:this.props.onSave}):c.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active",disabled:!0},c.default.createElement("i",{className:"fa fa-save"})))),c.default.createElement(p.DropdownToggle,{className:"sf2-icon-more mx-1"}),c.default.createElement(p.DropdownMenu,{right:!0},c.default.createElement(p.DropdownItem,null,c.default.createElement("a",{href:Z.siteRoot+"library/"+P+"/"+m.Utils.encodePath(D+H),className:"text-inherit"},(0,Z.gettext)("Open parent folder"))),a&&c.default.createElement(p.DropdownItem,{onClick:this.props.toggleLockFile},r),i&&c.default.createElement(p.DropdownItem,{onClick:this.toggleShareDialog},(0,Z.gettext)("Share")),"rw"==w&&c.default.createElement(p.DropdownItem,null,c.default.createElement("a",{href:Z.siteRoot+"repo/file_revisions/"+P+"/?p="+encodeURIComponent(M)+"&referer="+encodeURIComponent(location.href),className:"text-inherit"},(0,Z.gettext)("History"))),y&&c.default.createElement(p.DropdownItem,null,c.default.createElement("a",{href:"?dl=1",className:"text-inherit"},(0,Z.gettext)("Download"))),E&&c.default.createElement(p.DropdownItem,{onClick:this.props.toggleCommentPanel},(0,Z.gettext)("Comment")))),this.state.isShareDialogOpen&&c.default.createElement(S.default,null,c.default.createElement(X.default,{itemType:"file",itemName:B,itemPath:M,userPerm:w,repoID:P,repoEncrypted:!1,toggleDialog:this.toggleShareDialog})))}}]),t}(c.default.Component);v.propTypes=h,t.default=v},144:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(5),f={id:d.default.string.isRequired,icon:d.default.string.isRequired,text:d.default.string.isRequired,onClick:d.default.func,tag:d.default.string,href:d.default.string},Y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=function(){n.setState({tooltipOpen:!n.state.tooltipOpen})},n.state={tooltipOpen:!1},n}return i(t,e),s(t,[{key:"render",value:function(){var e=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{className:this.props.icon}),c.default.createElement(p.Tooltip,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},this.props.text));return this.props.tag&&"a"==this.props.tag?c.default.createElement(p.Button,{id:this.props.id,className:"btn-icon",tag:"a",href:this.props.href},e):c.default.createElement(p.Button,{id:this.props.id,className:"btn-icon",onClick:this.props.onClick},e)}}]),t}(c.default.Component);Y.propTypes=f,t.default=Y},145:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(8),f=a(p),Y=n(148),Z=n(5),m=n(2),L=n(3);n(105);var S=window.app.pageOptions,C=S.username,X=S.repoID,h=S.filePath,J={toggleCommentPanel:d.default.func.isRequired,commentsNumber:d.default.number},g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleResolvedComment=function(){n.setState({showResolvedComment:!n.state.showResolvedComment})},n.listComments=function(){L.seafileAPI.listComments(X,h).then(function(e){n.setState({commentsList:e.data.comments})})},n.handleCommentChange=function(e){n.setState({comment:e.target.value})},n.submitComment=function(){var e=n.refs.commentTextarea.value;e.trim()&&L.seafileAPI.postComment(X,h,e).then(function(){n.listComments()}),n.refs.commentTextarea.value=""},n.resolveComment=function(e){L.seafileAPI.updateComment(X,e.target.id,"true").then(function(){n.listComments()})},n.deleteComment=function(e){L.seafileAPI.deleteComment(X,e.target.id).then(function(){n.listComments()})},n.editComment=function(e,t){L.seafileAPI.updateComment(X,e,null,null,t).then(function(e){n.listComments()})},n.state={commentsList:[],showResolvedComment:!0},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.listComments()}},{key:"componentWillReceiveProps",value:function(e){this.props.commentsNumber!==e.commentsNumber&&this.listComments()}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"seafile-comment"},c.default.createElement("div",{className:"seafile-comment-title"},c.default.createElement("div",{onClick:this.props.toggleCommentPanel,className:"seafile-comment-title-close"},c.default.createElement("i",{className:"fa fa-times-circle"})),c.default.createElement("div",{className:"seafile-comment-title-text"},(0,m.gettext)("Comments"))),c.default.createElement("div",{className:"seafile-comment-toggle-resolved"},c.default.createElement("div",{className:"seafile-comment-title-text"},(0,m.gettext)("Show resolved comments")),c.default.createElement("div",{className:"seafile-comment-title-toggle d-flex"},c.default.createElement("label",{className:"custom-switch",id:"toggle-resolved-comments"},c.default.createElement("input",{type:"checkbox",name:"option",className:"custom-switch-input",onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&"checked"}),c.default.createElement("span",{className:"custom-switch-indicator"})))),c.default.createElement("ul",{className:"seafile-comment-list"},this.state.commentsList.length>0&&this.state.commentsList.map(function(t){var n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2],new Date(t.created_at).getTime()),a=(0,f.default)(n).format("YYYY-MM-DD HH:mm");return c.default.createElement(c.default.Fragment,{key:t.id},c.default.createElement(P,{item:t,time:a,deleteComment:e.deleteComment,resolveComment:e.resolveComment,editComment:e.editComment,showResolvedComment:e.state.showResolvedComment}))}),0==this.state.commentsList.length&&c.default.createElement("li",{className:"comment-vacant"},(0,m.gettext)("No comment yet."))),c.default.createElement("div",{className:"seafile-comment-footer"},c.default.createElement("textarea",{className:"add-comment-input",ref:"commentTextarea",placeholder:(0,m.gettext)("Add a comment."),clos:"100",rows:"3",warp:"virtual"}),c.default.createElement(Z.Button,{className:"submit-comment",color:"primary",size:"sm",onClick:this.submitComment},(0,m.gettext)("Submit"))))}}]),t}(c.default.Component);g.propTypes=J;var T={time:d.default.string.isRequired,item:d.default.object.isRequired,deleteComment:d.default.func.isRequired,resolveComment:d.default.func.isRequired,showResolvedComment:d.default.bool.isRequired,editComment:d.default.func.isRequired},P=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleDropDownMenu=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.convertComment=function(e){Y.processor.process(e).then(function(e){var t=String(e);n.setState({html:t})})},n.toggleEditComment=function(){n.setState({editable:!n.state.editable})},n.updateComment=function(e){var t=n.state.newComment;n.props.item.comment!==t&&n.props.editComment(e.target.id,t),n.toggleEditComment()},n.handleCommentChange=function(e){n.setState({newComment:e.target.value})},n.state={dropdownOpen:!1,html:"",newComment:n.props.item.comment,editable:!1},n}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.convertComment(this.props.item.comment)}},{key:"componentWillReceiveProps",value:function(e){this.convertComment(e.item.comment)}},{key:"render",value:function(){var e=this.props.item;return e.resolved&&!this.props.showResolvedComment?null:this.state.editable?c.default.createElement("li",{className:"seafile-comment-item",id:e.id},c.default.createElement("div",{className:"seafile-comment-info"},c.default.createElement("img",{className:"avatar",src:e.avatar_url,alt:""}),c.default.createElement("div",{className:"reviewer-info"},c.default.createElement("div",{className:"reviewer-name ellipsis"},e.user_name),c.default.createElement("div",{className:"review-time"},this.props.time))),c.default.createElement("div",{className:"seafile-edit-comment"},c.default.createElement("textarea",{className:"edit-comment-input",value:this.state.newComment,onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),c.default.createElement(Z.Button,{className:"comment-btn",color:"success",size:"sm",onClick:this.updateComment,id:e.id},(0,m.gettext)("Update"))," ",c.default.createElement(Z.Button,{className:"comment-btn",color:"secondary",size:"sm",onClick:this.toggleEditComment}," ",(0,m.gettext)("Cancel")))):c.default.createElement("li",{className:e.resolved?"seafile-comment-item seafile-comment-item-resolved":"seafile-comment-item",id:e.id},c.default.createElement("div",{className:"seafile-comment-info"},c.default.createElement("img",{className:"avatar",src:e.avatar_url,alt:""}),c.default.createElement("div",{className:"reviewer-info"},c.default.createElement("div",{className:"reviewer-name ellipsis"},e.user_name),c.default.createElement("div",{className:"review-time"},this.props.time)),c.default.createElement(Z.Dropdown,{isOpen:this.state.dropdownOpen,size:"sm",className:"seafile-comment-dropdown",toggle:this.toggleDropDownMenu},c.default.createElement(Z.DropdownToggle,{className:"seafile-comment-dropdown-btn"},c.default.createElement("i",{className:"fas fa-ellipsis-v"})),c.default.createElement(Z.DropdownMenu,null,e.user_email===C&&c.default.createElement(Z.DropdownItem,{onClick:this.props.deleteComment,className:"delete-comment",id:e.id},(0,m.gettext)("Delete")),e.user_email===C&&c.default.createElement(Z.DropdownItem,{onClick:this.toggleEditComment,className:"edit-comment",id:e.id},(0,m.gettext)("Edit")),!e.resolved&&c.default.createElement(Z.DropdownItem,{onClick:this.props.resolveComment,className:"seafile-comment-resolved",id:e.id},(0,m.gettext)("Mark as resolved"))))),c.default.createElement("div",{className:"seafile-comment-content",dangerouslySetInnerHTML:{__html:this.state.html}}))}}]),t}(c.default.Component);P.propTypes=T,t.default=g},146:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(2),f=window.app.pageOptions.err,Y={errorMsg:d.default.string},Z=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=void 0;return e="File preview unsupported"==f?c.default.createElement("p",null,(0,p.gettext)("Online view is not applicable to this file format")):c.default.createElement("p",{className:"error"},f||this.props.errorMsg),c.default.createElement("div",{className:"file-view-content flex-1 o-auto"},c.default.createElement("div",{className:"file-view-tip"},e,c.default.createElement("a",{href:"?dl=1",className:"btn btn-secondary"},(0,p.gettext)("Download"))))}}]),t}(c.default.Component);Z.propTypes=Y,t.default=Z},18:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),s=a(i),l=n(6),c=a(l),u=n(19),d=a(u),p="undefined"!==typeof window&&"undefined"!==typeof window.document,f=function e(){var t=this;if(r(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"none"}))},this.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"success"}))},this.warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"warning"}))},this.danger=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,o({},n,{intent:"danger"}))},p){var n=document.createElement("div");n.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(n),c.default.render(s.default.createElement(d.default,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),n)}};t.default=f},19:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(0),p=a(d),f=n(11),Y=n(1),Z=a(Y),m=n(20),L=a(m),S=(0,f.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:999999}),C=function(e){return Object.hasOwnProperty.call(e,"id")},X=function(e){function t(e,n){i(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.getToasts=function(){return a.state.toasts},a.closeAll=function(){a.getToasts().forEach(function(e){return e.close()})},a.notify=function(e,t){if(C(t)){var n=!0,r=!1,i=void 0;try{for(var s,l=a.state.toasts[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=s.value;String(c.id).startsWith(t.id)&&a.closeToast(c.id)}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}}var u=a.createToastInstance(e,t);return a.setState(function(e){return{toasts:[u].concat(o(e.toasts))}}),u},a.createToastInstance=function(e,n){var r=++t.idCounter,o=C(n)?n.id+"-"+r:r;return{id:o,title:e,description:n.description,hasCloseButton:n.hasCloseButton||!0,duration:n.duration||2,close:function(){return a.closeToast(o)},intent:n.intent}},a.closeToast=function(e){a.setState(function(t){return{toasts:t.toasts.map(function(t){return t.id===e?c({},t,{isShown:!1}):t})}})},a.removeToast=function(e){a.setState(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},e.bindNotify(a.notify),e.bindGetToasts(a.getToasts),e.bindCloseAll(a.closeAll),a.state={toasts:[]},a}return l(t,e),u(t,[{key:"render",value:function(){var e=this;return p.default.createElement("span",{className:S},this.state.toasts.map(function(t){var n=t.id,a=t.description,o=r(t,["id","description"]);return p.default.createElement(L.default,c({key:n,onRemove:function(){return e.removeToast(n)}},o),a)}))}}]),t}(p.default.PureComponent);X.propTypes={bindNotify:Z.default.func.isRequired,bindGetToasts:Z.default.func.isRequired,bindCloseAll:Z.default.func.isRequired},X.idCounter=0,t.default=X},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.isDocs="True"===window.app.config.isDocs,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.appAvatarURL=window.app.config.avatarURL,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canAddGroup=window.app.pageOptions.canAddGroup,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=window.app.pageOptions.canGenerateUploadLink,t.canSendShareLinkEmail=window.app.pageOptions.canSendShareLinkEmail,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled=window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkPasswordMinLength=window.app.pageOptions.shareLinkPasswordMinLength,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.shareLinkExpireDaysDefault=window.app.pageOptions.shareLinkExpireDaysDefault,t.maxFileName=window.app.pageOptions.maxFileName,t.enableWiki=window.app.pageOptions.enableWiki,t.canPublishRepo=window.app.pageOptions.canPublishRepo,t.enableEncryptedLibrary=window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting=window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.canAddPublicRepo=window.app.pageOptions.canAddPublicRepo,t.canInvitePeople=window.app.pageOptions.canInvitePeople,t.canLockUnlockFile=window.app.pageOptions.canLockUnlockFile,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.sharedToken=window.wiki?window.wiki.config.sharedToken:"",t.sharedType=window.wiki?window.wiki.config.sharedType:"",t.hasIndex=window.wiki?window.wiki.config.hasIndex:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.useNewAPI=window.fileHistory?window.fileHistory.pageOptions.use_new_api:"",t.canDownload=window.fileHistory?window.fileHistory.pageOptions.can_download_file:"",t.canCompare=window.fileHistory?window.fileHistory.pageOptions.can_compare:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.filePermission=window.draft?window.draft.config.perm:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:"",t.enableWorkWeixinDepartments=window.sysadmin?window.sysadmin.pageOptions.enable_work_weixin_departments:""},20:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(11),d=n(1),p=a(d),f=n(46),Y=a(f),Z=n(21),m=a(Z),L={deceleration:"cubic-bezier(0.0, 0.0, 0.2, 1)",acceleration:"cubic-bezier(0.4, 0.0, 1, 1)",spring:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},S=u.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),C=u.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),X=(0,u.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all 240ms "+L.deceleration,'&[data-state="entering"], &[data-state="entered"]':{animation:S+" 240ms "+L.spring+" both"},'&[data-state="exiting"]':{animation:C+" 120ms "+L.acceleration+" both"}}),h=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={isShown:!0,height:0},a.close=function(){a.clearCloseTimer(),a.setState({isShown:!1})},a.startCloseTimer=function(){a.props.duration&&(a.closeTimer=setTimeout(function(){a.close()},1e3*a.props.duration))},a.clearCloseTimer=function(){a.closeTimer&&(clearTimeout(a.closeTimer),a.closeTimer=null)},a.handleMouseEnter=function(){a.clearCloseTimer()},a.handleMouseLeave=function(){a.startCloseTimer()},a.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect(),n=t.height;a.setState({height:n})}},i=n,o(a,i)}return i(t,e),s(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return c.default.createElement(Y.default,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},function(t){return c.default.createElement("div",{"data-state":t,className:X,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},c.default.createElement("div",{ref:e.onRef,style:{padding:8}},c.default.createElement(m.default,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))})}}]),t}(c.default.PureComponent);h.propTypes={zIndex:p.default.number,duration:p.default.number,onRemove:p.default.func,intent:p.default.oneOf(["none","success","warning","danger"]).isRequired,title:p.default.node,children:p.default.node,hasCloseButton:p.default.bool,isShown:p.default.bool},h.defaultProps={intent:"none"},t.default=h},21:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(11),d=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.containerStyle=(0,u.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),n.containerBorderSuccess=(0,u.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),n.containerBorderWarn=(0,u.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),n.containerBorderDanger=(0,u.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),n.containerBorderNotify=(0,u.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),n.toastTextTitle=(0,u.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),n.toastTextChild=(0,u.css)({fontSize:"14px",color:"#999",margin:"0"}),n.toastClose=(0,u.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),n.toastIcon=(0,u.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),n}return o(t,e),s(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:(0,u.css)({color:"rgb(71, 184, 129)"}),iconClass:"fa fa-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:(0,u.css)({color:"rgb(217, 130, 43)"}),iconClass:"fa fa-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:(0,u.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:(0,u.css)({color:"rgb(236, 76, 71)"}),iconClass:"fa fa-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return c.default.createElement("div",(0,u.css)(e.borderStyle,this.containerStyle),c.default.createElement("div",{className:this.toastIcon},c.default.createElement("i",i({className:e.iconClass},e.iconColor))),c.default.createElement("div",{className:this.toastTextContainer},c.default.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?c.default.createElement("p",{className:this.toastTextChild},this.props.children):null),c.default.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},c.default.createElement("span",null,"\xd7")))}}]),t}(c.default.PureComponent);t.default=d},2201:function(e,t,n){n(13),e.exports=n(2202)},2202:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(6),d=a(u),p=n(141),f=a(p),Y=n(146),Z=a(Y),m=window.app.pageOptions.err,L=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(f.default,{content:c.default.createElement(S,null)})}}]),t}(c.default.Component),S=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){if(m)return c.default.createElement(Z.default,null)}}]),t}(c.default.Component);d.default.render(c.default.createElement(L,null),document.getElementById("wrapper"))},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var a=n(35),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(47),i=n(2),s=new o.SeafileAPI,l=r.default.load("sfcsrftoken");s.initForSeahubUsage({siteRoot:i.siteRoot,xcsrfHeaders:l}),t.seafileAPI=s},32:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(4),f=n(58),Y=a(f),Z={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,permissions:d.default.array.isRequired,currentPermission:d.default.string.isRequired,onPermissionChanged:d.default.func.isRequired},m=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.translatePermission=function(e){return p.Utils.sharePerms(e)},a.translateExplanation=function(e){return p.Utils.sharePermsExplanation(e)},i=n,o(a,i)}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(Y.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission,translateExplanation:this.translateExplanation})}}]),t}(c.default.Component);m.propTypes=Z,t.default=m},38:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(5),f=n(3),Y=n(2),Z=n(9),m=a(Z),L={token:d.default.string.isRequired,linkType:d.default.string.isRequired,toggleSendLink:d.default.func.isRequired,closeShareDialog:d.default.func.isRequired},S=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEmailsInputChange=function(e){n.setState({emails:e.target.value})},n.handleMsgInputChange=function(e){n.setState({msg:e.target.value})},n.sendLink=function(){var e=n.state,t=e.emails,a=e.msg;if(!t.trim())return void n.setState({errorMsg:(0,Y.gettext)("Please input at least an email.")});n.setState({btnDisabled:!0,sending:!0});var r=n.props,o=r.token;("uploadLink"==r.linkType?f.seafileAPI.sendUploadLink(o,t.trim(),a.trim()):f.seafileAPI.sendShareLink(o,t.trim(),a.trim())).then(function(e){n.props.closeShareDialog();var t=e.data,a=t.success,r=t.failed;if(a.length){var o=(0,Y.gettext)("Successfully sent to {placeholder}").replace("{placeholder}",a.join(", "));m.default.success(o)}r.length&&r.map(function(e){var t=(0,Y.gettext)("Failed to send to {email_placeholder}: {errorMsg_placeholder}").replace("{email_placeholder}",e.email).replace("{errorMsg_placeholder}",e.error_msg);m.default.warning(t)})}).catch(function(e){var t="";t=e.response?e.response.data&&e.response.data.error_msg?e.response.data.error_msg:(0,Y.gettext)("Error"):(0,Y.gettext)("Please check the network."),n.setState({btnDisabled:!1,sending:!1,errorMsg:t})})},n.state={emails:"",msg:"",errorMsg:"",btnDisabled:!1,sending:!1},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.state,t=e.emails,n=e.msg,a=e.errorMsg,r=e.btnDisabled,o=e.sending;return c.default.createElement(p.Form,null,c.default.createElement(p.FormGroup,null,c.default.createElement(p.Label,{htmlFor:"emails",className:"text-secondary font-weight-normal"},(0,Y.gettext)("Send to:")),c.default.createElement("input",{type:"text",id:"emails",className:"form-control w-75",value:t,onChange:this.handleEmailsInputChange,placeholder:(0,Y.gettext)("Emails, separated by ','")})),c.default.createElement(p.FormGroup,null,c.default.createElement(p.Label,{htmlFor:"msg",className:"text-secondary font-weight-normal"},(0,Y.gettext)("Message (optional):")),c.default.createElement("textarea",{className:"form-control w-75",id:"msg",value:n,onChange:this.handleMsgInputChange})),a&&c.default.createElement("p",{className:"error"},a),c.default.createElement(p.Button,{color:"primary",onClick:this.sendLink,disabled:r,className:"mr-2"},(0,Y.gettext)("Send")),c.default.createElement(p.Button,{color:"secondary",onClick:this.props.toggleSendLink},(0,Y.gettext)("Cancel")),o&&c.default.createElement("p",{className:"mt-2"},(0,Y.gettext)("Sending...")))}}]),t}(c.default.Component);S.propTypes=L,t.default=S},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var a=n(2),r=n(14),o=t.Utils={keyCodes:{esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function(e){if("undefined"==typeof e)return" ";if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var n=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===n?e+" "+t[n]:(e/Math.pow(1e3,n)).toFixed(1)+" "+t[n]},isHiDPI:function(){return(window.devicePixelRatio?window.devicePixelRatio:1)>1},FILEEXT_ICON_MAP:{md:"txt.png",txt:"txt.png",pdf:"pdf.png",doc:"word.png",docx:"word.png",odt:"word.png",fodt:"word.png",ppt:"ppt.png",pptx:"ppt.png",odp:"ppt.png",fodp:"ppt.png",xls:"excel.png",xlsx:"excel.png",ods:"excel.png",fods:"excel.png",mp4:"video.png",ogv:"video.png",webm:"video.png",mov:"video.png",flv:"video.png",wmv:"video.png",rmvb:"video.png",mp3:"music.png",oga:"music.png",ogg:"music.png",flac:"music.png",aac:"music.png",ac3:"music.png",wma:"music.png",jpg:"pic.png",jpeg:"pic.png",png:"pic.png",svg:"pic.png",gif:"pic.png",bmp:"pic.png",ico:"pic.png",default:"file.png"},imageCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["gif","jpeg","jpg","png","ico","bmp"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},isOfficeFile:function(e){return-1!=e.lastIndexOf(".")&&-1!=["doc","ppt","xls","docx","pptx","xlsx"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},videoCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["mp4","ogv","webm","mov"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},encodePath:function(e){if(!e)return"";for(var t=e.split("/"),n=[],a=0,r=t.length;a<r;a++)n.push(encodeURIComponent(t[a]));return n.join("/")},HTMLescape:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},generateDialogTitle:function(e,t){var n=this.HTMLescape(t),a='<span class="op-target ellipsis ellipsis-op-target" title='+n+">"+n+"</span>";return e.replace("{placeholder}",a)},getFileName:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},getPaths:function(e){for(var t=e.split("/").slice(1),n=[];t.length;)n.push("/"+t.join("/")),t.pop();return n.reverse()},getFolderName:function(e){return"/"===e?e:(e="/"!==e[e.length-1]?e:e.slice(0,e.length-2),e.slice(e.lastIndexOf("/")+1))},getDirName:function(e){var t=e.slice(0,e.lastIndexOf("/"));return""===t?"/":t},isChildPath:function(e,t){return this.getDirName(e)===t},isAncestorPath:function(e,t){return t.indexOf(e)>-1},renameAncestorPath:function(e,t,n){return e.replace(t,n)},joinPath:function(e,t){return"/"===e[e.length-1]?e+t:e+"/"+t},isSupportUploadFolder:function(){return-1!=navigator.userAgent.indexOf("Firefox")||navigator.userAgent.indexOf("Chrome")>-1},isIEBrower:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;return t||n},getDefaultLibIconUrl:function(e){var t=o.isHiDPI()?48:24;t=e?256:t;return a.mediaUrl+"img/lib/"+t+"/lib.png"},getLibIconUrl:function(e,t){var n=e.permission||e.share_permission,r=o.isHiDPI()?48:24;r=t?256:r;var i="lib.png";switch(e.encrypted&&(i="lib-encrypted.png"),n){case"r":i="lib-readonly.png";break;case"preview":i="lib-cloud-preview.png";break;case"cloud-edit":i="lib-cloud-preview-edit.png"}return"read-only"==e.status&&(i="lib-readonly.png"),a.mediaUrl+"img/lib/"+r+"/"+i},getDirentIcon:function(e,t){var n=this.isHiDPI()?48:24;if(n=t?192:n,e.isDir()){var a=!1;return!e.permission||"r"!==e.permission&&"preview"!==e.permission||(a=!0),this.getFolderIconUrl(a,n)}return this.getFileIconUrl(e.name,n)},getFolderIconUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return t||(t=o.isHiDPI()?48:24),t=t>24?192:24,a.mediaUrl+"img/folder"+(e?"-read-only-":"-")+t+".png"},getFileIconUrl:function(e,t){t||(t=o.isHiDPI()?48:24),t=t>24?192:24;var n="";return-1==e.lastIndexOf(".")?a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default:(n=e.substr(e.lastIndexOf(".")+1).toLowerCase(),this.FILEEXT_ICON_MAP[n]?a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP[n]:a.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default)},getLibIconTitle:function(e){var t,n=e.permission||e.share_permission;if(e.encrypted)t=(0,a.gettext)("Encrypted library");else if(e.is_admin)t=(0,a.gettext)("Admin access");else switch(n){case"rw":t=(0,a.gettext)("Read-Write library");break;case"r":t=(0,a.gettext)("Read-Only library");break;case"cloud-edit":t=(0,a.gettext)("Online Read-Write library");break;case"preview":t=(0,a.gettext)("Online Read-Only library")}return t},getFolderIconTitle:function(e){var t;switch(e.permission){case"rw":t=(0,a.gettext)("Read-Write folder");break;case"r":t=(0,a.gettext)("Read-Only folder");break;case"cloud-edit":t=(0,a.gettext)("Online Read-Write folder");break;case"preview":t=(0,a.gettext)("Online Read-Only folder")}return t},sharePerms:function(e){var t;switch(e){case"rw":t=(0,a.gettext)("Read-Write");break;case"r":t=(0,a.gettext)("Read-Only");break;case"admin":t=(0,a.gettext)("Admin");break;case"cloud-edit":t=(0,a.gettext)("Online Read-Write");break;case"preview":t=(0,a.gettext)("Online Read-Only")}return t},sharePermsExplanation:function(e){var t;switch(e){case"rw":t=(0,a.gettext)("User can read, write, upload, download and sync files.");break;case"r":t=(0,a.gettext)("User can read, download and sync files.");break;case"admin":t=(0,a.gettext)("Besides Write permission, user can also share the library.");break;case"cloud-edit":t=(0,a.gettext)("User can view and edit file online via browser. Files can't be downloaded.");break;case"preview":t=(0,a.gettext)("User can only view files online via browser. Files can't be downloaded.")}return t},formatSize:function(e){var t=e.bytes,n=e.precision||0;return t>=0&&t<1e3?t+" B":t>=1e3&&t<1e6?(t/1e3).toFixed(n)+" KB":t>=1e6&&t<1e9?(t/1e6).toFixed(n)+" MB":t>=1e9&&t<1e12?(t/1e9).toFixed(n)+" GB":t>=1e12?(t/1e12).toFixed(n)+" TB":t+" B"},formatBitRate:function(e){var t;return"number"!==typeof e?"":(t=e/8,t>=1e9?(t/1e9).toFixed(2)+" GB/s":t>=1e6?(t/1e6).toFixed(2)+" MB/s":t>=1e3?(t/1e3).toFixed(2)+" kB/s":t.toFixed(2)+" B/s")},isMarkdownFile:function(e){var t=e.lastIndexOf(".");if(-1===t)return!1;var n=e.substring(t).toLowerCase();return".md"===n||".markdown"===n},isInternalMarkdownLink:function(e,t){return new RegExp(a.serviceURL+"/lib/"+t+".*.md$").test(e)},isInternalDirLink:function(e,t){return new RegExp(a.serviceURL+"/library/"+t+".*").test(e)},getPathFromInternalMarkdownLink:function(e,t){var n=new RegExp(a.serviceURL+"/lib/"+t+"/file(.*.md)"),r=n.exec(e);return decodeURIComponent(r[1])},getPathFromInternalDirLink:function(e,t){var n=new RegExp(a.serviceURL+"/library/"+t+"(/.*)"),r=n.exec(e),o=decodeURIComponent(r[1]);return o=o.slice(1),o=o.slice(o.indexOf("/"))},isWikiInternalMarkdownLink:function(e,t){return t=encodeURIComponent(t),new RegExp(a.serviceURL+"/published/"+t+".*.md$").test(e)},isWikiInternalDirLink:function(e,t){return t=encodeURIComponent(t),new RegExp(a.serviceURL+"/published/"+t+".*").test(e)},getPathFromWikiInternalMarkdownLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(a.serviceURL+"/published/"+t+"(.*.md)"),r=n.exec(e),o=r[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},getPathFromWikiInternalDirLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(a.serviceURL+"/published/"+t+"(/.*)"),r=n.exec(e),o=r[1];try{o=decodeURIComponent(o)}catch(e){o=o.replace(/%/g,"%25"),o=decodeURIComponent(o)}return o},compareTwoWord:function(e,t){var n,a,o=e.charCodeAt(0),i=t.charCodeAt(0);return 19968<o&&o<40869&&19968<i&&i<40869?(n=r.strChineseFirstPY.charAt(o-19968).toLowerCase(),a=r.strChineseFirstPY.charAt(i-19968).toLowerCase(),n>=a?1:-1):19968<o&&o<40869&&!(19968<i&&i<40869)?1:!(19968<o&&o<40869)&&19968<i&&i<40869?-1:(n=e.toLowerCase(),a=t.toLowerCase(),this.compareStrWithNumbersIn(n,a))},compareStrWithNumbersIn:function(e,t){var n,a,r,o=/\d+|\D+/g,i=/\d/,s=e.match(o),l=t.match(o),c=Math.min(s.length,l.length);if(s&&l&&(n=i.test(s[0]))==i.test(l[0]))for(var u=0;u<c;u++){if(a=s[u],r=l[u],n&&(a=parseInt(a,10),r=parseInt(r,10)),a!=r)return a<r?-1:1;n=!n}return(e>=t)-(e<=t)},sortRepos:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return e.repo_name?t.repo_name?a.compareTwoWord(e.repo_name,t.repo_name):-1:1};break;case"name-desc":r=function(e,t){return e.repo_name?t.repo_name?-a.compareTwoWord(e.repo_name,t.repo_name):1:-1};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){if(e.size===t.size){return a.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){if(e.size===t.size){return-a.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?1:-1}}return e.sort(r),e},sortDirents:function(e,t,n){var a=this,r=void 0;switch(t+"-"+n){case"name-asc":r=function(e,t){return a.compareTwoWord(e.name,t.name)};break;case"name-desc":r=function(e,t){return-a.compareTwoWord(e.name,t.name)};break;case"time-asc":r=function(e,t){return e.mtime<t.mtime?-1:1};break;case"time-desc":r=function(e,t){return e.mtime<t.mtime?1:-1};break;case"size-asc":r=function(e,t){if("dir"==e.type&&"dir"==t.type){return a.compareTwoWord(e.name,t.name)}return e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){if("dir"==e.type&&"dir"==t.type){return-a.compareTwoWord(e.name,t.name)}return e.size_original<t.size_original?1:-1}}return e.sort(function(e,t){return"dir"==e.type&&"file"==t.type?-1:"file"==e.type&&"dir"==t.type?1:r(e,t)}),e},changeMarkdownNodes:function(e,t){return e.map(function(e){t(e),e.nodes&&e.nodes.length>0&&o.changeMarkdownNodes(e.nodes,t)}),e},chooseLanguage:function(e){var t=void 0;switch(e){case"py":t="python";break;case"js":t="javascript";break;case"c":t="text/x-csrc";break;case"cpp":t="text/x-c++src";break;case"java":t="text/x-java";break;case"cs":t="text/x-csharp";break;case"mdf":t="text/x-sql";break;case"html":t="htmlmixed";break;default:t=e}return t},DARK_COLOR_MAP:{red:"#D11507",orange:"#FF8C00",yellow:"#EDEF00",green:"#006400",cyan:"#00E0E1",blue:"#2510A3",indigo:"#350C56",purple:"#551054",pink:"#E3A5B0",azure:"#C4D0D0",lime:"#00E100",teal:"#006A6B",gray:"#545454","#FFA8A8":"#E49090","#FFA94D":"#E39136","#FFD43B":"#E0B815","#A0EC50":"#83CF32","#A9E34B":"#8DC72E","#63E6BE":"#43CAA4","#4FD2C9":"#2DB9B0","#72C3FC":"#57ABE3","#91A7FF":"#7A91E7","#E599F7":"#CC82DE","#B197FC":"#9B82E5","#F783AC":"#DF6D97","#CED4DA":"#A8ADB2"},getDarkColor:function(e){return this.DARK_COLOR_MAP[e]},getCopySuccessfulMessage:function(e){var t=void 0,n=e.length;return 1===n?t=(0,a.gettext)("Successfully copied %(name)s."):2===n?t=(0,a.gettext)("Successfully copied %(name)s and 1 other item."):(t=(0,a.gettext)("Successfully copied %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",n-1)),t=t.replace("%(name)s",e[0])},getMoveSuccessMessage:function(e){var t=void 0,n=e.length;return 1===n?t=(0,a.gettext)("Successfully moved %(name)s."):2===n?t=(0,a.gettext)("Successfully moved %(name)s and 1 other item."):(t=(0,a.gettext)("Successfully moved %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",n-1)),t=t.replace("%(name)s",e[0])},getCopyFailedMessage:function(e){var t=void 0,n=e.length;return n>1?(t=(0,a.gettext)("Failed to copy %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",n-1)):t=(0,a.gettext)("Failed to copy %(name)s."),t=t.replace("%(name)s",e[0])},getMoveFailedMessage:function(e){var t=void 0,n=e.length;return n>1?(t=(0,a.gettext)("Failed to move %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",n-1)):t=(0,a.gettext)("Failed to move %(name)s."),t=t.replace("%(name)s",e[0])},handleSearchedItemClick:function(e){if(!0===e.is_dir){var t=a.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+e.path;window.open("about:blank").location.href=t}else{var n=a.siteRoot+"lib/"+e.repo_id+"/file"+o.encodePath(e.path);window.open("about:blank").location.href=n}},generatePassword:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz0123456789",n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},pathNormalize:function(e){for(var t=e.split("/"),n=[],a=0;a<t.length;a++)"."!==t[a]&&""!==t[a]&&(".."===t[a]?n.pop():n.push(t[a]));return n.join("/")},getEventData:function(e,t){return e.target.dataset?e.target.dataset[t]:e.target.getAttribute("data-"+t)},isHasPermissionToShare:function(e,t,n){var r=e.is_admin,o=e.is_virtual,i=e.encrypted,s=e.owner_email,l=s===a.username;if(i)return!1;if(n&&"file"===n.type){var c=!1;return!a.canGenerateShareLink||"rw"!=t&&"r"!=t||(c=!0),c}if(a.canGenerateShareLink&&("rw"==t||"r"==t))return!0;if(a.canGenerateUploadLink&&"rw"==t)return!0;return!(o||!l&&!r)&&!0}}},48:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(0),u=a(c),d=n(1),p=a(d),f=n(165),Y=a(f),Z=n(3),m=n(2),L={placeholder:p.default.string.isRequired,onSelectChange:p.default.func.isRequired,isMulti:p.default.bool.isRequired,className:p.default.string},S=function(e){return u.default.createElement("div",l({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,m.gettext)("User not found"))},C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.options=[],n.props.onSelectChange(e)},n.loadOptions=function(e,t){var a=e.trim();a.length>0&&Z.seafileAPI.searchUsers(a).then(function(e){n.options=[];for(var a=0;a<e.data.users.length;a++){var r=e.data.users[a],o={};o.value=r.name,o.email=r.email,o.label=u.default.createElement(u.default.Fragment,null,u.default.createElement("img",{src:r.avatar_url,className:"select-module select-module-icon avatar",alt:""}),u.default.createElement("span",{className:"select-module select-module-name"},r.name)),n.options.push(o)}t(n.options)})},n.clearSelect=function(){n.refs.userSelect.select.onChange([],{action:"clear"})},n.options=[],n}return i(t,e),s(t,[{key:"render",value:function(){return u.default.createElement(Y.default,{isClearable:!0,classNamePrefix:!0,components:{NoOptionsMessage:S},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,placeholder:this.props.placeholder,className:"user-select "+this.props.className,value:this.props.value,ref:"userSelect"})}}]),t}(u.default.Component);C.propTypes=L,t.default=C},50:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(5),f=n(2),Y=n(77),Z=a(Y),m=n(78),L=a(m),S=n(79),C=a(S),X=n(80),h=a(X),J=n(3),g=n(10),T=a(g);n(65);var P={isGroupOwnedRepo:d.default.bool,itemType:d.default.string.isRequired,itemName:d.default.string.isRequired,itemPath:d.default.string.isRequired,toggleDialog:d.default.func.isRequired,repoID:d.default.string.isRequired,repoEncrypted:d.default.bool,userPerm:d.default.string,enableDirPrivateShare:d.default.bool},D=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getInitialActiveTab=function(){var e=n.props,t=e.repoEncrypted,a=e.userPerm,r=e.enableDirPrivateShare,o=!t&&f.canGenerateShareLink,i=!t&&f.canGenerateUploadLink&&"rw"==a;return o?"shareLink":i?"uploadLink":r?"shareToUser":void 0},n.toggle=function(e){n.state.activeTab!==e&&n.setState({activeTab:e})},n.renderDirContent=function(){if(!n.state.isRepoJudgemented)return c.default.createElement(T.default,null);var e=n.state.activeTab,t=n.props,a=t.repoEncrypted,r=t.userPerm,o=t.enableDirPrivateShare,i=!a&&f.canGenerateShareLink,s=!a&&f.canGenerateUploadLink&&"rw"==r;return c.default.createElement(l.Fragment,null,c.default.createElement("div",{className:"share-dialog-side"},c.default.createElement(p.Nav,{pills:!0,vertical:!0},i&&c.default.createElement(p.NavItem,null,c.default.createElement(p.NavLink,{className:"shareLink"===e?"active":"",onClick:n.toggle.bind(n,"shareLink")},(0,f.gettext)("Share Link"))),s&&c.default.createElement(p.NavItem,null,c.default.createElement(p.NavLink,{className:"uploadLink"===e?"active":"",onClick:n.toggle.bind(n,"uploadLink")},(0,f.gettext)("Upload Link"))),o&&c.default.createElement(l.Fragment,null,c.default.createElement(p.NavItem,null,c.default.createElement(p.NavLink,{className:"shareToUser"===e?"active":"",onClick:n.toggle.bind(n,"shareToUser")},(0,f.gettext)("Share to user"))),c.default.createElement(p.NavItem,null,c.default.createElement(p.NavLink,{className:"shareToGroup"===e?"active":"",onClick:n.toggle.bind(n,"shareToGroup")},(0,f.gettext)("Share to group")))))),c.default.createElement("div",{className:"share-dialog-main"},c.default.createElement(p.TabContent,{activeTab:n.state.activeTab},i&&c.default.createElement(p.TabPane,{tabId:"shareLink"},c.default.createElement(C.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})),s&&c.default.createElement(p.TabPane,{tabId:"uploadLink"},c.default.createElement(h.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})),o&&c.default.createElement(l.Fragment,null,c.default.createElement(p.TabPane,{tabId:"shareToUser"},c.default.createElement(Z.default,{itemType:n.props.itemType,isGroupOwnedRepo:n.props.isGroupOwnedRepo,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner})),c.default.createElement(p.TabPane,{tabId:"shareToGroup"},c.default.createElement(L.default,{itemType:n.props.itemType,isGroupOwnedRepo:n.props.isGroupOwnedRepo,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner}))))))},n.renderFileContent=function(){return c.default.createElement(l.Fragment,null,c.default.createElement("div",{className:"share-dialog-side"},c.default.createElement(p.Nav,{pills:!0,vertical:!0},c.default.createElement(p.NavItem,null,c.default.createElement(p.NavLink,{className:"active",onClick:function(){n.toggle.bind(n,"shareLink")}},(0,f.gettext)("Share Link"))))),c.default.createElement("div",{className:"share-dialog-main"},c.default.createElement(p.TabContent,{activeTab:n.state.activeTab},c.default.createElement(p.TabPane,{tabId:"shareLink"},c.default.createElement(C.default,{itemPath:n.props.itemPath,repoID:n.props.repoID,closeShareDialog:n.props.toggleDialog})))))},n.state={activeTab:n.getInitialActiveTab(),isRepoJudgemented:!1,isRepoOwner:!1},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;J.seafileAPI.getRepoInfo(t).then(function(t){var n=t.data.owner_email===f.username;e.setState({isRepoJudgemented:!0,isRepoOwner:n})})}},{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.itemName,a=e.repoEncrypted,r=!a&&f.canGenerateShareLink;return c.default.createElement("div",null,c.default.createElement(p.Modal,{isOpen:!0,style:{maxWidth:"720px"},className:"share-dialog",toggle:this.props.toggleDialog},c.default.createElement(p.ModalHeader,{toggle:this.props.toggleDialog},(0,f.gettext)("Share")," ",c.default.createElement("span",{className:"op-target",title:n},n)),c.default.createElement(p.ModalBody,{className:"share-dialog-content"},("library"===t||"dir"===t)&&this.renderDirContent(),"file"===t&&r&&this.renderFileContent())))}}]),t}(c.default.Component);D.propTypes=P,t.default=D},58:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(2),f=n(54),Y=a(f);n(64);var Z={isTextMode:d.default.bool.isRequired,isEditIconShow:d.default.bool.isRequired,options:d.default.array.isRequired,currentOption:d.default.string.isRequired,translateOption:d.default.func.isRequired,translateExplanation:d.default.func,onOptionChanged:d.default.func.isRequired,toggleItemFreezed:d.default.func},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOptions=function(){n.options=[];for(var e=n.props.options,t=0,a=e.length;t<a;t++){var r={};r.value=e[t],r.label=c.default.createElement("div",null,n.props.translateOption(e[t]),n.props.translateExplanation&&c.default.createElement("div",{className:"permission-editor-explanation"},n.props.translateExplanation(e[t]))),n.options.push(r)}n.setState({options:n.options})},n.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({isEditing:!0}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!0)},n.onOptionChanged=function(e){var t=e.value;t!==n.props.currentOption&&n.props.onOptionChanged(t),n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation()},n.onHideSelect=function(){n.setState({isEditing:!1}),n.props.toggleItemFreezed&&n.props.toggleItemFreezed(!1)},n.state={isEditing:!1,options:[]},n.options=[],n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onHideSelect),this.setOptions()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onHideSelect)}},{key:"render",value:function(){var e=this.props,t=e.currentOption,n=e.isTextMode;return c.default.createElement("div",{className:"permission-editor",onClick:this.onSelectHandler},(!n||this.state.isEditing)&&c.default.createElement(Y.default,{options:this.state.options,className:"permission-editor-select",classNamePrefix:"permission-editor",placeholder:this.props.translateOption(t),onChange:this.onOptionChanged,captureMenuScroll:!1}),n&&!this.state.isEditing&&c.default.createElement("div",null,this.props.translateOption(t),this.props.isEditIconShow&&c.default.createElement("span",{title:(0,p.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditPermission})))}}]),t}(c.default.Component);m.propTypes=Z,t.default=m},64:function(e,t){},65:function(e,t){},68:function(e,t){},70:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.obj_name=t.obj_name,this.is_dir=t.is_dir,this.permissions=t.permissions,this.username=t.username,this.is_expired=t.is_expired,this.expire_date=t.expire_date,this.token=t.token,this.link=t.link,this.view_cnt=t.view_cnt,this.ctime=t.ctime};t.default=r},71:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){a(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.link=t.link,this.obj_name=t.obj_name,this.username=t.username,this.ctime=t.ctime,this.token=t.token,this.view_cnt=t.view_cnt};t.default=r},72:function(e,t,n){"use strict";function a(){return o.default.createElement("span",{className:"session-expired-tip"},(0,i.gettext)("You are logged out.")," ",o.default.createElement("a",{className:"action-link session-expired-link",href:i.loginUrl+"?next="+encodeURIComponent(location.href)},(0,i.gettext)("Login again.")))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(2);t.default=a},77:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(2),f=n(5),Y=n(3),Z=n(48),m=a(Z),L=n(32),S=a(L);n(68);var C=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.user_info.name)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return c.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c.default.createElement("td",{className:"name"},e.user_info.nickname),c.default.createElement("td",null,c.default.createElement(S.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),c.default.createElement("td",null,c.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,p.gettext)("Delete")})))}}]),t}(c.default.Component),X=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.items;return c.default.createElement("tbody",null,t.map(function(t,n){return c.default.createElement(C,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(c.default.Component),h={isGroupOwnedRepo:d.default.bool,itemPath:d.default.string.isRequired,itemType:d.default.string.isRequired,repoID:d.default.string.isRequired,isRepoOwner:d.default.bool.isRequired},J=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleSelectChange=function(e){n.setState({selectedOption:e}),n.options=[]},n.setPermission=function(e){n.setState({permission:e})},n.shareToUser=function(){var e=[],t=n.props.itemPath,a=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var r=0;r<n.state.selectedOption.length;r++)e[r]=n.state.selectedOption[r].email;n.props.isGroupOwnedRepo?Y.seafileAPI.shareGroupOwnedRepoToUser(a,n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success.map(function(e){return{user_info:{nickname:e.user_name,name:e.user_email},permission:e.permission,share_type:"user"}});n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,p.gettext)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}}):Y.seafileAPI.shareFolder(a,t,"user",n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,p.gettext)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}})},n.deleteShareItem=function(e){var t=n.props.itemPath,a=n.props.repoID;n.props.isGroupOwnedRepo?Y.seafileAPI.deleteGroupOwnedRepoSharedUserItem(a,e).then(function(t){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.user_info.name!==e})})}):Y.seafileAPI.deleteShareToUserItem(a,t,"user",e).then(function(t){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.user_info.name!==e})})})},n.onChangeUserPermission=function(e,t){var a=n.props.itemPath,r=n.props.repoID,o=e.user_info.name;n.props.isGroupOwnedRepo?Y.seafileAPI.modifyGroupOwnedRepoUserSharedPermission(r,t,o).then(function(){n.updateSharedItems(e,t)}):Y.seafileAPI.updateShareToUserItemPermission(r,a,"user",o,t).then(function(){n.updateSharedItems(e,t)})},n.updateSharedItems=function(e,t){var a=e.user_info.name,r=n.state.sharedItems.map(function(e){var n=e.user_info.name;return a===n&&(e.permission=t),e.is_admin="admin"===t,e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=[];var a=e.itemType,i=e.isRepoOwner;return"library"===a?n.permissions=i?["rw","r","admin","cloud-edit","preview"]:["rw","r","cloud-edit","preview"]:"dir"===n.props.itemType&&(n.permissions=["rw","r","cloud-edit","preview"]),!n.props.isGroupOwnedRepo&&p.isPro||(n.permissions=["rw","r"]),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,n=this.props.repoID;Y.seafileAPI.listSharedItems(n,t,"user").then(function(t){0!==t.data.length&&e.setState({sharedItems:t.data})})}},{key:"render",value:function(){var e=this.state.sharedItems;return c.default.createElement(l.Fragment,null,c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{width:"50%"},(0,p.gettext)("User")),c.default.createElement("th",{width:"35%"},(0,p.gettext)("Permission")),c.default.createElement("th",{width:"15%"}))),c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement(m.default,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:(0,p.gettext)("Select users..."),onSelectChange:this.handleSelectChange})),c.default.createElement("td",null,c.default.createElement(S.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),c.default.createElement("td",null,c.default.createElement(f.Button,{onClick:this.shareToUser},(0,p.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n="";return n=e.email?e.email+": "+e.error_msg:e,c.default.createElement("tr",{key:t},c.default.createElement("td",{colSpan:3},c.default.createElement("p",{className:"error"},n)))}))),c.default.createElement("div",{className:"share-list-container"},c.default.createElement("table",{className:"table-thead-hidden"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{width:"50%"},(0,p.gettext)("User")),c.default.createElement("th",{width:"35%"},(0,p.gettext)("Permission")),c.default.createElement("th",{width:"15%"}))),c.default.createElement(X,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission})),p.canInvitePeople&&c.default.createElement("a",{href:p.siteRoot+"invitations/",className:"invite-link-in-popup"},c.default.createElement("i",{className:"sf2-icon-invite invite-link-icon-in-popup"}),c.default.createElement("span",{className:"invite-link-icon-in-popup"},(0,p.gettext)("Invite People")))))}}]),t}(c.default.Component);J.propTypes=h,t.default=J},78:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),d=a(u),p=n(1),f=a(p),Y=n(5),Z=n(54),m=a(Z),L=n(150),S=a(L),C=n(2),X=n(3),h=n(32),J=a(h),g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.group_info.id)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return d.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},d.default.createElement("td",{className:"name"},e.group_info.name),d.default.createElement("td",null,d.default.createElement(J.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),d.default.createElement("td",null,d.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,C.gettext)("Delete")})))}}]),t}(d.default.Component),T=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.items;return d.default.createElement("tbody",null,t.map(function(t,n){return d.default.createElement(g,{key:n,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(d.default.Component),P={isGroupOwnedRepo:f.default.bool,itemPath:f.default.string.isRequired,itemType:f.default.string.isRequired,repoID:f.default.string.isRequired,isRepoOwner:f.default.bool.isRequired},D=function(e){return d.default.createElement("div",l({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,C.gettext)("Group not found"))},Q=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleSelectChange=function(e){n.setState({selectedOption:e})},n.loadOptions=function(){X.seafileAPI.shareableGroups().then(function(e){n.options=[];for(var t=0;t<e.data.length;t++){var a={};a.value=e.data[t].name,a.id=e.data[t].id,a.label=e.data[t].name,n.options.push(a)}})},n.listSharedGroups=function(){var e=n.props.itemPath,t=n.props.repoID;X.seafileAPI.listSharedItems(t,e,"group").then(function(e){0!==e.data.length&&n.setState({sharedItems:e.data})})},n.setPermission=function(e){n.setState({permission:e})},n.shareToGroup=function(){var e=[],t=n.props.itemPath,a=n.props.repoID,r=n.props.isGroupOwnedRepo;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var o=0;o<n.state.selectedOption.length;o++)e[o]=n.state.selectedOption[o].id;r?X.seafileAPI.shareGroupOwnedRepoToGroup(a,n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success.map(function(e){return{group_info:{id:e.group_id,name:e.group_name},permission:e.permission,share_type:"group"}});n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"})}):X.seafileAPI.shareFolder(a,t,"group",n.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"})})},n.deleteShareItem=function(e){var t=n.props.itemPath,a=n.props.repoID;n.props.isGroupOwnedRepo?X.seafileAPI.deleteGroupOwnedRepoSharedGroupItem(a,e).then(function(){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.group_info.id!==e})})}):X.seafileAPI.deleteShareToGroupItem(a,t,"group",e).then(function(){n.setState({sharedItems:n.state.sharedItems.filter(function(t){return t.group_info.id!==e})})})},n.onChangeUserPermission=function(e,t){var a=n.props.itemPath,r=n.props.repoID,o=e.group_info.id;n.props.isGroupOwnedRepo?X.seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(r,t,o).then(function(){n.updateSharedItems(e,t)}):X.seafileAPI.updateShareToGroupItemPermission(r,a,"group",o,t).then(function(){n.updateSharedItems(e,t)})},n.updateSharedItems=function(e,t){var a=e.group_info.id,r=n.state.sharedItems.map(function(e){var n=e.group_info.id;return a===n&&(e.permission=t),e.is_admin="admin"===t,e});n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=[];var a=e.itemType,r=e.isRepoOwner;return"library"===a?n.permissions=r?["rw","r","admin","cloud-edit","preview"]:["rw","r","cloud-edit","preview"]:"dir"===a&&(n.permissions=["rw","r","cloud-edit","preview"]),!n.props.isGroupOwnedRepo&&C.isPro||(n.permissions=["rw","r"]),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){return d.default.createElement(u.Fragment,null,d.default.createElement("table",null,d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,C.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,C.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement(m.default,r({isMulti:!0,onChange:this.handleSelectChange,options:this.options,placeholder:(0,C.gettext)("Select groups..."),components:(0,S.default)(),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption},"components",{NoOptionsMessage:D}))),d.default.createElement("td",null,d.default.createElement(J.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),d.default.createElement("td",null,d.default.createElement(Y.Button,{onClick:this.shareToGroup},(0,C.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var n=e.group_name+": "+e.error_msg;return d.default.createElement("tr",{key:t},d.default.createElement("td",{colSpan:3},d.default.createElement("p",{className:"error"},n)))}))),d.default.createElement("div",{className:"share-list-container"},d.default.createElement("table",{className:"table-thead-hidden"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,C.gettext)("Group")),d.default.createElement("th",{width:"35%"},(0,C.gettext)("Permission")),d.default.createElement("th",{width:"15%"}))),d.default.createElement(T,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(d.default.Component);Q.propTypes=P,t.default=Q},79:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(8),f=a(p),Y=n(69),Z=a(Y),m=n(5),L=n(2),S=n(3),C=n(4),X=n(70),h=a(X),J=n(9),g=a(J),T=n(10),P=a(T),D=n(38),Q=a(D),H={itemPath:d.default.string.isRequired,repoID:d.default.string.isRequired,closeShareDialog:d.default.func.isRequired},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPasswordInputChecked=function(){n.setState({isShowPasswordInput:!n.state.isShowPasswordInput,password:"",passwdnew:"",errorInfo:""})},n.togglePasswordVisible=function(){n.setState({isPasswordVisible:!n.state.isPasswordVisible})},n.generatePassword=function(){var e=C.Utils.generatePassword(L.shareLinkPasswordMinLength);n.setState({password:e,passwdnew:e})},n.inputPassword=function(e){var t=e.target.value.trim();n.setState({password:t})},n.inputPasswordNew=function(e){var t=e.target.value.trim();n.setState({passwdnew:t})},n.setPermission=function(e){"previewAndDownload"==e?n.permissions={can_edit:!1,can_download:!0}:"preview"==e?n.permissions={can_edit:!1,can_download:!1}:"editOnCloudAndDownload"==e&&(n.permissions={can_edit:!0,can_download:!0})},n.generateShareLink=function(){if(n.validateParamsInput()){n.setState({errorInfo:""});var e=n.props,t=e.itemPath,a=e.repoID,r=n.state,o=r.password,i=r.expireDays,s=n.permissions;s=JSON.stringify(s),S.seafileAPI.createShareLink(a,t,o,i,s).then(function(e){var t=new h.default(e.data);n.setState({sharedLinkInfo:t})})}},n.onCopySharedLink=function(){var e=n.state.sharedLinkInfo.link;(0,Z.default)(e),g.default.success((0,L.gettext)("Share link is copied to the clipboard.")),n.props.closeShareDialog()},n.onCopyDownloadLink=function(){var e=n.state.sharedLinkInfo.link+"?dl";(0,Z.default)(e),g.default.success((0,L.gettext)("Direct download link is copied to the clipboard.")),n.props.closeShareDialog()},n.deleteShareLink=function(){var e=n.state.sharedLinkInfo;S.seafileAPI.deleteShareLink(e.token).then(function(){n.setState({password:"",passwordnew:"",isShowPasswordInput:!1,expireDays:L.shareLinkExpireDaysDefault,isExpireChecked:!1,errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1}),n.permissions={can_edit:!1,can_download:!0}})},n.onExpireChecked=function(e){n.setState({isExpireChecked:e.target.checked})},n.onExpireDaysChanged=function(e){var t=e.target.value.trim();n.setState({expireDays:t})},n.validateParamsInput=function(){var e=n.state,t=e.isShowPasswordInput,a=e.password,r=e.passwdnew,o=e.isExpireChecked,i=e.expireDays;if(t){if(0===a.length)return n.setState({errorInfo:"Please enter password"}),!1;if(a.length<L.shareLinkPasswordMinLength)return n.setState({errorInfo:"Password is too short"}),!1;if(a!==r)return n.setState({errorInfo:"Passwords don't match"}),!1}var s=/^\d+$/;if(n.isExpireDaysNoLimit){if(o){if(!i)return n.setState({errorInfo:"Please enter days"}),!1;if(!s.test(i))return n.setState({errorInfo:"Please enter a non-negative integer"}),!1;n.setState({expireDays:parseInt(i)})}}else{if(!i)return n.setState({errorInfo:"Please enter days"}),!1;if(!s.test(i))return n.setState({errorInfo:"Please enter a non-negative integer"}),!1;i=parseInt(i);var l=parseInt(L.shareLinkExpireDaysMin),c=parseInt(L.shareLinkExpireDaysMax);if(0!==l&&c!==c&&i<l)return n.setState({errorInfo:"Please enter valid days"}),!1;if(0===l&&0!==c&&i>c)return n.setState({errorInfo:"Please enter valid days"}),!1;if(0!==l&&0!==c&&(i<l||i>c))return n.setState({errorInfo:"Please enter valid days"}),!1;n.setState({expireDays:i})}return!0},n.onNoticeMessageToggle=function(){n.setState({isNoticeMessageShow:!n.state.isNoticeMessageShow})},n.toggleSendLink=function(){n.setState({isSendLinkShown:!n.state.isSendLinkShown})},n.state={isValidate:!1,isShowPasswordInput:!1,isPasswordVisible:!1,isExpireChecked:!1,password:"",passwdnew:"",expireDays:L.shareLinkExpireDaysDefault,errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1,isLoading:!0,fileInfo:null,isSendLinkShown:!1},n.permissions={can_edit:!1,can_download:!0},n.isExpireDaysNoLimit=0===parseInt(L.shareLinkExpireDaysMin)&&0===parseInt(L.shareLinkExpireDaysMax),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,n=this.props.repoID;S.seafileAPI.getShareLink(n,t).then(function(t){if(0!==t.data.length){var n=new h.default(t.data[0]);e.setState({isLoading:!1,sharedLinkInfo:n})}else e.setState({isLoading:!1})}),S.seafileAPI.getFileInfo(n,t).then(function(t){t.data&&e.setState({fileInfo:t.data})})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return c.default.createElement(P.default,null);var t=(0,L.gettext)("(at least {passwordLength} characters)");if(t=t.replace("{passwordLength}",L.shareLinkPasswordMinLength),this.state.sharedLinkInfo){var n=this.state.sharedLinkInfo;return c.default.createElement("div",null,c.default.createElement(m.Form,{className:"mb-4"},c.default.createElement(m.FormGroup,{className:"mb-0"},c.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Link:")),c.default.createElement("dd",{className:"d-flex"},c.default.createElement("span",null,n.link)," ",n.is_expired?c.default.createElement("span",{className:"err-message"},"(",(0,L.gettext)("Expired"),")"):c.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopySharedLink}))),!n.is_dir&&n.permissions.can_download&&c.default.createElement(m.FormGroup,{className:"mb-0"},c.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Direct Download Link:")),c.default.createElement("dd",{className:"d-flex"},c.default.createElement("span",null,n.link,"?dl=1")," ",n.is_expired?c.default.createElement("span",{className:"err-message"},"(",(0,L.gettext)("Expired"),")"):c.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyDownloadLink}))),n.expire_date&&c.default.createElement(m.FormGroup,{className:"mb-0"},c.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Expiration Date:")),c.default.createElement("dd",null,(0,f.default)(n.expire_date).format("YYYY-MM-DD hh:mm:ss")))),L.canSendShareLinkEmail&&!this.state.isSendLinkShown&&!this.state.isNoticeMessageShow&&c.default.createElement(m.Button,{onClick:this.toggleSendLink,className:"mr-2"},(0,L.gettext)("Send")),this.state.isSendLinkShown&&c.default.createElement(Q.default,{linkType:"shareLink",token:n.token,toggleSendLink:this.toggleSendLink,closeShareDialog:this.props.closeShareDialog}),!this.state.isSendLinkShown&&!this.state.isNoticeMessageShow&&c.default.createElement(m.Button,{onClick:this.onNoticeMessageToggle},(0,L.gettext)("Delete")),this.state.isNoticeMessageShow&&c.default.createElement("div",{className:"alert alert-warning"},c.default.createElement("h4",{className:"alert-heading"},(0,L.gettext)("Are you sure you want to delete the share link?")),c.default.createElement("p",{className:"mb-4"},(0,L.gettext)("If the share link is deleted, no one will be able to access it any more.")),c.default.createElement("button",{className:"btn btn-primary",onClick:this.deleteShareLink},(0,L.gettext)("Delete"))," ",c.default.createElement("button",{className:"btn btn-secondary",onClick:this.onNoticeMessageToggle},(0,L.gettext)("Cancel"))))}var a=this.state.fileInfo;return c.default.createElement(m.Form,{className:"generate-share-link"},c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement(m.Input,{type:"checkbox",onChange:this.onPasswordInputChecked}),"  ",(0,L.gettext)("Add password protection"))),this.state.isShowPasswordInput&&c.default.createElement(m.FormGroup,{className:"link-operation-content",check:!0},c.default.createElement(m.Label,{className:"font-weight-bold"},(0,L.gettext)("Password"))," ",c.default.createElement("span",{className:"tip"},t),c.default.createElement(m.InputGroup,{className:"passwd"},c.default.createElement(m.Input,{type:this.state.isPasswordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),c.default.createElement(m.InputGroupAddon,{addonType:"append"},c.default.createElement(m.Button,{onClick:this.togglePasswordVisible},c.default.createElement("i",{className:"link-operation-icon fas "+(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})),c.default.createElement(m.Button,{onClick:this.generatePassword},c.default.createElement("i",{className:"link-operation-icon fas fa-magic"})))),c.default.createElement(m.Label,{className:"font-weight-bold"},(0,L.gettext)("Password again")),c.default.createElement(m.Input,{className:"passwd",type:this.state.isPasswordVisible?"text":"password",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})),this.isExpireDaysNoLimit&&c.default.createElement(l.Fragment,null,c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement(m.Input,{className:"expire-checkbox",type:"checkbox",onChange:this.onExpireChecked}),"  ",(0,L.gettext)("Add auto expiration"))),this.state.isExpireChecked&&c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement(m.Input,{className:"expire-input expire-input-border",type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged,readOnly:!this.state.isExpireChecked}),c.default.createElement("span",{className:"expir-span"},(0,L.gettext)("days"))))),!this.isExpireDaysNoLimit&&c.default.createElement(l.Fragment,null,c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement(m.Input,{className:"expire-checkbox",type:"checkbox",onChange:this.onExpireChecked,checked:!0,readOnly:!0,disabled:!0}),"  ",(0,L.gettext)("Add auto expiration"))),c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement(m.Input,{className:"expire-input expire-input-border",type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged}),c.default.createElement("span",{className:"expir-span"},(0,L.gettext)("days")),0!==parseInt(L.shareLinkExpireDaysMin)&&0!==parseInt(L.shareLinkExpireDaysMax)&&c.default.createElement("span",{className:"d-inline-block ml-7"},"(",L.shareLinkExpireDaysMin," - ",L.shareLinkExpireDaysMax," ",(0,L.gettext)("days"),")"),0!==parseInt(L.shareLinkExpireDaysMin)&&0===parseInt(L.shareLinkExpireDaysMax)&&c.default.createElement("span",{className:"d-inline-block ml-7"},"(",(0,L.gettext)("Greater than or equal to")," ",L.shareLinkExpireDaysMin," ",(0,L.gettext)("days"),")"),0===parseInt(L.shareLinkExpireDaysMin)&&0!==parseInt(L.shareLinkExpireDaysMax)&&c.default.createElement("span",{className:"d-inline-block ml-7"},"(",(0,L.gettext)("Less than or equal to")," ",L.shareLinkExpireDaysMax," ",(0,L.gettext)("days"),")")))),c.default.createElement(m.FormGroup,{check:!0},c.default.createElement(m.Label,{check:!0},c.default.createElement("span",null,"  ",(0,L.gettext)("Set permission")))),c.default.createElement(m.FormGroup,{check:!0,className:"permission"},c.default.createElement(m.Label,{className:"form-check-label"},c.default.createElement(m.Input,{type:"radio",name:"radio1",defaultChecked:!0,onChange:function(){return e.setPermission("previewAndDownload")}}),"  ",(0,L.gettext)("Preview and download"))),c.default.createElement(m.FormGroup,{check:!0,className:"permission"},c.default.createElement(m.Label,{className:"form-check-label"},c.default.createElement(m.Input,{type:"radio",name:"radio1",onChange:function(){return e.setPermission("preview")}}),"  ",(0,L.gettext)("Preview only"))),C.Utils.isOfficeFile(this.props.itemPath)&&a&&a.can_edit&&c.default.createElement(m.FormGroup,{check:!0,className:"permission"},c.default.createElement(m.Label,{className:"form-check-label"},c.default.createElement(m.Input,{type:"radio",name:"radio1",onChange:function(){return e.setPermission("editOnCloudAndDownload")}}),"  ",(0,L.gettext)("Edit on cloud and download"))),this.state.errorInfo&&c.default.createElement(m.Alert,{color:"danger",className:"mt-2"},(0,L.gettext)(this.state.errorInfo)),c.default.createElement(m.Button,{onClick:this.generateShareLink,className:"mt-2"},(0,L.gettext)("Generate")))}}]),t}(c.default.Component);w.propTypes=H,t.default=w},80:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),u=n(1),d=a(u),p=n(69),f=a(p),Y=n(5),Z=n(2),m=n(3),L=n(4),S=n(71),C=a(S),X=n(9),h=a(X),J=n(38),g=a(J),T=n(72),P=a(T),D={itemPath:d.default.string.isRequired,repoID:d.default.string.isRequired,closeShareDialog:d.default.func.isRequired},Q=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUploadLink=function(){var e=n.props.itemPath,t=n.props.repoID;m.seafileAPI.getUploadLinks(t,e).then(function(e){if(0!==e.data.length){var t=new C.default(e.data[0]);n.setState({sharedUploadInfo:t})}}).catch(function(e){403===e.response.status&&(h.default.danger(c.default.createElement(P.default,null),{id:"session_expired",duration:3600}),n.props.closeShareDialog())})},n.addPassword=function(){n.setState({showPasswordInput:!n.state.showPasswordInput,password:"",passwdnew:"",errorInfo:""})},n.togglePasswordVisible=function(){n.setState({passwordVisible:!n.state.passwordVisible})},n.generatePassword=function(){var e=L.Utils.generatePassword(Z.shareLinkPasswordMinLength);n.setState({password:e,passwordnew:e})},n.inputPassword=function(e){n.setState({password:e.target.value})},n.inputPasswordNew=function(e){n.setState({passwordnew:e.target.value})},n.generateUploadLink=function(){var e=n.props.itemPath,t=n.props.repoID;n.state.showPasswordInput&&""==n.state.password?n.setState({errorInfo:(0,Z.gettext)("Please enter password")}):n.state.showPasswordInput&&n.state.showPasswordInput&&n.state.password.length<Z.shareLinkPasswordMinLength?n.setState({errorInfo:(0,Z.gettext)("Password is too short")}):n.state.showPasswordInput&&n.state.password!==n.state.passwordnew?n.setState({errorInfo:(0,Z.gettext)("Passwords don't match")}):m.seafileAPI.createUploadLink(t,e,n.state.password).then(function(e){var t=new C.default(e.data);n.setState({sharedUploadInfo:t})})},n.onCopyUploadLink=function(){var e=n.state.sharedUploadInfo.link;(0,f.default)(e),h.default.success((0,Z.gettext)("Upload link is copied to the clipboard.")),n.props.closeShareDialog()},n.deleteUploadLink=function(){var e=n.state.sharedUploadInfo;m.seafileAPI.deleteUploadLink(e.token).then(function(){n.setState({showPasswordInput:!1,password:"",passwordnew:"",sharedUploadInfo:null})})},n.toggleSendLink=function(){n.setState({isSendLinkShown:!n.state.isSendLinkShown})},n.state={showPasswordInput:!1,passwordVisible:!1,password:"",passwdnew:"",sharedUploadInfo:null,isSendLinkShown:!1},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.getUploadLink()}},{key:"render",value:function(){var e=this.state.isSendLinkShown,t=(0,Z.gettext)("(at least {passwordLength} characters)");if(t=t.replace("{passwordLength}",Z.shareLinkPasswordMinLength),this.state.sharedUploadInfo){var n=this.state.sharedUploadInfo;return c.default.createElement("div",null,c.default.createElement(Y.Form,{className:"mb-4"},c.default.createElement(Y.FormGroup,null,c.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,Z.gettext)("Upload Link:")),c.default.createElement("dd",{className:"d-flex"},c.default.createElement("span",null,n.link),c.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyUploadLink})))),Z.canSendShareLinkEmail&&!e&&c.default.createElement(Y.Button,{onClick:this.toggleSendLink,className:"mr-2"},(0,Z.gettext)("Send")),!e&&c.default.createElement(Y.Button,{onClick:this.deleteUploadLink},(0,Z.gettext)("Delete")),e&&c.default.createElement(g.default,{linkType:"uploadLink",token:n.token,toggleSendLink:this.toggleSendLink,closeShareDialog:this.props.closeShareDialog}))}return c.default.createElement(Y.Form,{className:"generate-upload-link"},c.default.createElement(Y.FormGroup,{check:!0},c.default.createElement(Y.Label,{check:!0},c.default.createElement(Y.Input,{type:"checkbox",onChange:this.addPassword}),"  ",(0,Z.gettext)("Add password protection"))),this.state.showPasswordInput&&c.default.createElement(Y.FormGroup,{className:"link-operation-content"},c.default.createElement(Y.Label,{className:"font-weight-bold"},(0,Z.gettext)("Password"))," ",c.default.createElement("span",{className:"tip"},t),c.default.createElement(Y.InputGroup,{className:"passwd"},c.default.createElement(Y.Input,{type:this.state.passwordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),c.default.createElement(Y.InputGroupAddon,{addonType:"append"},c.default.createElement(Y.Button,{onClick:this.togglePasswordVisible},c.default.createElement("i",{className:"link-operation-icon fas "+(this.state.passwordVisible?"fa-eye":"fa-eye-slash")})),c.default.createElement(Y.Button,{onClick:this.generatePassword},c.default.createElement("i",{className:"link-operation-icon fas fa-magic"})))),c.default.createElement(Y.Label,{className:"font-weight-bold"},(0,Z.gettext)("Password again")),c.default.createElement(Y.Input,{className:"passwd",type:this.state.passwordVisible?"text":"password",value:this.state.passwordnew||"",onChange:this.inputPasswordNew})),this.state.errorInfo&&c.default.createElement(Y.Alert,{color:"danger",className:"mt-2"},this.state.errorInfo),c.default.createElement(Y.Button,{className:"generate-link-btn",onClick:this.generateUploadLink},(0,Z.gettext)("Generate")))}}]),t}(c.default.Component);Q.propTypes=D,t.default=Q},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=new r.default;t.default=o}},[2201]);